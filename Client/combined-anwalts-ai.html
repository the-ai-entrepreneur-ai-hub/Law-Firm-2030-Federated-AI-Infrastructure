<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Anwalts-AI - Komplette Lösung</title>
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Anwalts-AI - Ihr KI-Partner für deutsche Rechtsdokumente</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700;900&display=swap" rel="stylesheet">
    <style>
        * { font-family: 'Inter', sans-serif; }
        
        /* TUNNEL SHADER BACKGROUND - AMAZING ANIMATION */
        #shader-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -2;
        }
        
        /* Enhanced Floating Glass Navbar - SAME AS PAGE BACKGROUND */
        .floating-navbar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 100;
            background: transparent;
            padding: 20px 0;
            transition: all 0.3s ease;
        }
        
        /* Scroll-based shadow class */
        .floating-navbar.scrolled {
            box-shadow: 
                0 8px 32px rgba(67, 56, 202, 0.3),
                0 4px 16px rgba(0, 0, 0, 0.15),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
        }
        
        .navbar-content {
            width: 100%;
            max-width: none;
            margin: 0;
            padding: 0 8rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .cloud-background::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: 
                radial-gradient(circle at 20% 80%, rgba(255, 255, 255, 0.03) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(255, 255, 255, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 40% 40%, rgba(255, 255, 255, 0.02) 0%, transparent 50%);
            animation: cloudFloat 20s ease-in-out infinite;
            transform: rotate(0deg);
        }
        
        .cloud-background::after {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: 
                radial-gradient(circle at 60% 70%, rgba(255, 255, 255, 0.02) 0%, transparent 50%),
                radial-gradient(circle at 90% 10%, rgba(255, 255, 255, 0.04) 0%, transparent 50%);
            animation: cloudFloat 25s ease-in-out infinite reverse;
            transform: rotate(45deg);
        }
        
        @keyframes cloudFloat {
            0%, 100% { transform: translate(0, 0) rotate(0deg) scale(1); }
            25% { transform: translate(-20px, -10px) rotate(1deg) scale(1.02); }
            50% { transform: translate(-10px, -20px) rotate(-1deg) scale(0.98); }
            75% { transform: translate(20px, -5px) rotate(0.5deg) scale(1.01); }
        }
        
        /* ENHANCED STACKED CARDS ANIMATION */
        .cards-section {
            --_offset-steps: 2.5rem;
            --_scale-steps: 6;
            --_opacity-steps: 10;
            --_offset-steps-two: calc(var(--_offset-steps) * -0.8);
            --_offset-steps-three: calc(var(--_offset-steps) * -1.6);
            --scale-steps-two: calc(1 - var(--_scale-steps) * 0.012);
            --scale-steps-three: calc(1 - var(--_scale-steps) * 0.024);
            --opacity-steps-two: calc(1 - var(--_opacity-steps) * 0.012);
            --opacity-steps-three: calc(1 - var(--_opacity-steps) * 0.024);
            display: grid;
            grid-template-areas: "stack";
            width: 100%;
            max-width: 420px;
            perspective: 1200px;
            margin: 2rem 0;
            margin-left: 4rem;
        }
        
        .feature-card {
            grid-area: stack;
            transition: all 700ms cubic-bezier(0.25, 0.46, 0.45, 0.94);
            translate: var(--_offset) 0;
            order: var(--_order);
            z-index: var(--_order);
            scale: var(--_scale);
            opacity: var(--_opacity);
            cursor: grab;
            user-select: none;
            transform-style: preserve-3d;
            filter: blur(0px);
        }
        
        .feature-card:active { cursor: grabbing; }
        
        .feature-card:nth-of-type(1) {
            --_order: var(--_1-order);
            --_scale: var(--_1-scale);
            --_opacity: var(--_1-opacity);
            --_offset: var(--_1-offset);
        }
        
        .feature-card:nth-of-type(2) {
            --_order: var(--_2-order);
            --_scale: var(--_2-scale);
            --_opacity: var(--_2-opacity);
            --_offset: var(--_2-offset);
        }
        
        .feature-card:nth-of-type(3) {
            --_order: var(--_3-order);
            --_scale: var(--_3-scale);
            --_opacity: var(--_3-opacity);
            --_offset: var(--_3-offset);
        }
        
        .feature-card:nth-of-type(4) {
            --_order: var(--_4-order);
            --_scale: var(--_4-scale);
            --_opacity: var(--_4-opacity);
            --_offset: var(--_4-offset);
        }
        
        .cards-section.feature-1-active {
            --_1-order: 10; --_1-scale: 1; --_1-opacity: 1; --_1-offset: 0;
            --_2-order: 9; --_2-scale: var(--scale-steps-two); --_2-opacity: var(--opacity-steps-two); --_2-offset: var(--_offset-steps-two);
            --_3-order: 8; --_3-scale: var(--scale-steps-three); --_3-opacity: var(--opacity-steps-three); --_3-offset: var(--_offset-steps-three);
            --_4-order: 7; --_4-scale: calc(1 - var(--_scale-steps) * 0.03); --_4-opacity: calc(1 - var(--_opacity-steps) * 0.04); --_4-offset: calc(var(--_offset-steps) * -2.2);
        }
        
        .cards-section.feature-2-active {
            --_2-order: 10; --_2-scale: 1; --_2-opacity: 1; --_2-offset: 0;
            --_3-order: 9; --_3-scale: var(--scale-steps-two); --_3-opacity: var(--opacity-steps-two); --_3-offset: var(--_offset-steps-two);
            --_4-order: 8; --_4-scale: var(--scale-steps-three); --_4-opacity: var(--opacity-steps-three); --_4-offset: var(--_offset-steps-three);
            --_1-order: 7; --_1-scale: calc(1 - var(--_scale-steps) * 0.03); --_1-opacity: calc(1 - var(--_opacity-steps) * 0.04); --_1-offset: calc(var(--_offset-steps) * -2.2);
        }
        
        .cards-section.feature-3-active {
            --_3-order: 10; --_3-scale: 1; --_3-opacity: 1; --_3-offset: 0;
            --_4-order: 9; --_4-scale: var(--scale-steps-two); --_4-opacity: var(--opacity-steps-two); --_4-offset: var(--_offset-steps-two);
            --_1-order: 8; --_1-scale: var(--scale-steps-three); --_1-opacity: var(--opacity-steps-three); --_1-offset: var(--_offset-steps-three);
            --_2-order: 7; --_2-scale: calc(1 - var(--_scale-steps) * 0.03); --_2-opacity: calc(1 - var(--_opacity-steps) * 0.04); --_2-offset: calc(var(--_offset-steps) * -2.2);
        }
        
        .cards-section.feature-4-active {
            --_4-order: 10; --_4-scale: 1; --_4-opacity: 1; --_4-offset: 0;
            --_1-order: 9; --_1-scale: var(--scale-steps-two); --_1-opacity: var(--opacity-steps-two); --_1-offset: var(--_offset-steps-two);
            --_2-order: 8; --_2-scale: var(--scale-steps-three); --_2-opacity: var(--opacity-steps-three); --_2-offset: var(--_offset-steps-three);
            --_3-order: 7; --_3-scale: calc(1 - var(--_scale-steps) * 0.03); --_3-opacity: calc(1 - var(--_opacity-steps) * 0.04); --_3-offset: calc(var(--_offset-steps) * -2.2);
        }
        
        .dragging-left { 
            transform: translateX(-40px) rotateY(-8deg) scale(1.02);
            filter: brightness(1.1);
            box-shadow: 0 20px 60px rgba(67, 56, 202, 0.4);
        }
        .dragging-right { 
            transform: translateX(40px) rotateY(8deg) scale(1.02);
            filter: brightness(1.1);
            box-shadow: 0 20px 60px rgba(67, 56, 202, 0.4);
        }
        
        /* ENHANCED GLASSMORPHISM AND ANIMATIONS */
        .glass-card {
            background: linear-gradient(135deg, rgba(67, 56, 202, 0.4), rgba(30, 27, 75, 0.25));
            backdrop-filter: blur(25px);
            border: 1px solid rgba(139, 92, 246, 0.5);
            box-shadow: 0 25px 50px rgba(67, 56, 202, 0.3), 
                        inset 0 1px 0 rgba(255, 255, 255, 0.1);
        }
        
        
        .gradient-text {
            background: linear-gradient(135deg, #ffffff, #e5e7eb);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        /* ENHANCED ANIMATIONS */
        @keyframes slideInUp {
            from { transform: translateY(50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        @keyframes fadeInScale {
            from { transform: scale(0.8); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-8px); }
        }
        
        @keyframes slideDownGlow {
            from { 
                transform: translateY(-30px); 
                opacity: 0; 
                box-shadow: 0 0 20px rgba(99, 102, 241, 0.3); 
            }
            to { 
                transform: translateY(0); 
                opacity: 1; 
                box-shadow: 0 10px 40px rgba(99, 102, 241, 0.2); 
            }
        }
        
        @keyframes bounce {
            0%, 20%, 53%, 80%, 100% { transform: translate3d(0,0,0); }
            40%, 43% { transform: translate3d(0,-10px,0); }
            70% { transform: translate3d(0,-5px,0); }
            90% { transform: translate3d(0,-2px,0); }
        }
        
        @keyframes pulseGlow {
            0%, 100% { 
                box-shadow: 0 0 20px rgba(99, 102, 241, 0.3);
                transform: scale(1);
            }
            50% { 
                box-shadow: 0 0 40px rgba(99, 102, 241, 0.6);
                transform: scale(1.02);
            }
        }
        
        .slide-in-up { animation: slideInUp 0.8s ease-out; }
        .fade-in-scale { animation: fadeInScale 0.6s ease-out; }
        .float-animation { animation: float 3s ease-in-out infinite; }
        .slide-down-glow { animation: slideDownGlow 1s ease-out; }
        .bounce-animation { animation: bounce 2s ease-in-out infinite; }
        .pulse-glow { animation: pulseGlow 3s ease-in-out infinite; }
        
        .legal-button {
            background: linear-gradient(135deg, rgba(79, 70, 229, 0.8), rgba(67, 56, 202, 0.6));
            backdrop-filter: blur(20px);
            border: 1px solid rgba(139, 92, 246, 0.4);
            box-shadow: 0 4px 15px rgba(79, 70, 229, 0.3);
            transition: all 0.3s ease;
        }
        
        .legal-button:hover {
            transform: translateY(-2px);
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.9), rgba(79, 70, 229, 0.7));
            box-shadow: 0 8px 25px rgba(139, 92, 246, 0.4);
        }
        
        /* Subtle Running Lights Animation for CTAs */
        .cta-with-lights {
            position: relative;
            overflow: hidden;
        }
        
        .cta-with-lights::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(
                90deg,
                transparent,
                rgba(255, 255, 255, 0.1),
                rgba(255, 255, 255, 0.2),
                rgba(255, 255, 255, 0.1),
                transparent
            );
            animation: runningLight 3s linear infinite;
            border-radius: inherit;
        }
        
        @keyframes runningLight {
            0% { left: -100%; }
            100% { left: 100%; }
        }
        
        .cta-with-lights:hover::before {
            animation-duration: 1.5s;
        }
        
        /* Enhanced border glow for CTA buttons */
        .cta-with-lights::after {
            content: '';
            position: absolute;
            top: -1px;
            left: -1px;
            right: -1px;
            bottom: -1px;
            background: linear-gradient(
                45deg,
                transparent,
                rgba(139, 92, 246, 0.3),
                transparent,
                rgba(79, 70, 229, 0.3),
                transparent
            );
            background-size: 200% 200%;
            border-radius: inherit;
            z-index: -1;
            animation: borderGlow 4s linear infinite;
            opacity: 0.7;
        }
        
        @keyframes borderGlow {
            0% { background-position: 0% 0%; }
            25% { background-position: 100% 0%; }
            50% { background-position: 100% 100%; }
            75% { background-position: 0% 100%; }
            100% { background-position: 0% 0%; }
        }
        
        /* Scroll down indicator */
        .scroll-indicator {
            position: fixed;
            bottom: 2rem;
            left: 50%;
            transform: translateX(-50%);
            z-index: 20;
            animation: bounce 2s infinite;
            cursor: pointer;
        }
        
        .scroll-indicator svg {
            stroke: rgba(255, 255, 255, 0.7);
            transition: all 0.3s ease;
        }
        
        .scroll-indicator:hover svg {
            stroke: white;
            transform: scale(1.1);
        }
        
        .feature-icon-gradient-1 { background: linear-gradient(135deg, #6366F1, #4338CA); }
        .feature-icon-gradient-2 { background: linear-gradient(135deg, #8B5CF6, #7C3AED); }
        .feature-icon-gradient-3 { background: linear-gradient(135deg, #06B6D4, #0891B2); }
        .feature-icon-gradient-4 { background: linear-gradient(135deg, #10B981, #059669); }
        
        /* SMOOTH SCROLL */
        html { scroll-behavior: smooth; }
        
        /* TESTIMONIAL CARDS */
        .testimonial-card {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.08), rgba(255, 255, 255, 0.04));
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }
        
        /* RESPONSIVE IMPROVEMENTS */
        @media (max-width: 1024px) {
            .cards-section {
                margin-left: 2rem;
            }
        }
        
        @media (max-width: 768px) {
            .cards-section {
                --_offset-steps: 2rem;
                width: min(calc(100% - 1rem), 18rem);
                margin-left: 0;
                margin: 2rem auto 0;
            }
            
            .floating-navbar {
                padding: 12px 0;
            }
            
            .navbar-content {
                padding: 0 1.5rem;
                flex-direction: row;
                justify-content: space-between;
            }
            
            .navbar-content > div:nth-child(2) { /* Center nav */
                display: none !important;
            }
            
            .navbar-content > div:nth-child(3) { /* Right section */
                display: flex !important;
            }
            
            .feature-card {
                transition: all 500ms cubic-bezier(0.25, 0.46, 0.45, 0.94);
            }
        }
        
        /* Additional visual enhancements */
        .content {
            position: relative;
            z-index: 10;
        }
        
        /* AUTHENTICATION MODAL SYSTEM */
        .auth-modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(8px);
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }
        
        .auth-modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }
        
        .auth-modal {
            background: linear-gradient(135deg, rgba(67, 56, 202, 0.15), rgba(30, 27, 75, 0.1));
            backdrop-filter: blur(25px);
            border: 1px solid rgba(139, 92, 246, 0.3);
            border-radius: 20px;
            padding: 2rem;
            max-width: 420px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 
                0 25px 50px rgba(67, 56, 202, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
            transform: scale(0.9) translateY(20px);
            transition: all 0.4s cubic-bezier(0.16, 1, 0.3, 1);
            position: relative;
        }
        
        /* Removed problematic scrolling border animation */
        
        .auth-modal.active {
            transform: scale(1) translateY(0);
        }
        
        .auth-modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
        }
        
        .auth-modal-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: white;
            font-family: 'Playfair Display', serif;
        }
        
        .auth-modal-close {
            background: none;
            border: none;
            color: rgba(255, 255, 255, 0.7);
            font-size: 1.5rem;
            cursor: pointer;
            padding: 0.5rem;
            border-radius: 8px;
            transition: all 0.2s ease;
        }
        
        .auth-modal-close:hover {
            color: white;
            background: rgba(255, 255, 255, 0.1);
        }
        
        /* SOCIAL LOGIN BUTTONS */
        .social-login-section {
            margin-bottom: 1.5rem;
        }
        
        .social-button {
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.75rem;
            padding: 0.875rem 1rem;
            margin-bottom: 0.75rem;
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            color: white;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .social-button:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: rgba(255, 255, 255, 0.3);
            transform: translateY(-1px);
        }
        
        .social-button.google:hover {
            border-color: rgba(66, 133, 244, 0.5);
        }
        
        .social-button.twitter:hover {
            border-color: rgba(29, 161, 242, 0.5);
        }
        
        /* FORM DIVIDER */
        .auth-divider {
            display: flex;
            align-items: center;
            margin: 1.5rem 0;
            color: rgba(255, 255, 255, 0.6);
            font-size: 0.875rem;
        }
        
        .auth-divider::before,
        .auth-divider::after {
            content: '';
            flex: 1;
            height: 1px;
            background: rgba(255, 255, 255, 0.2);
        }
        
        .auth-divider span {
            padding: 0 1rem;
        }
        
        /* FORM INPUTS */
        .auth-form-group {
            margin-bottom: 1rem;
        }
        
        .auth-form-label {
            display: block;
            margin-bottom: 0.5rem;
            color: rgba(255, 255, 255, 0.9);
            font-size: 0.875rem;
            font-weight: 500;
        }
        
        .auth-form-input {
            width: 100%;
            padding: 0.875rem 1rem;
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            color: white;
            font-size: 1rem;
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
        }
        
        .auth-form-input:focus {
            outline: none;
            border-color: rgba(139, 92, 246, 0.5);
            background: rgba(255, 255, 255, 0.12);
            box-shadow: 0 0 0 3px rgba(139, 92, 246, 0.1);
        }
        
        .auth-form-input::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }
        
        /* FORM OPTIONS */
        .auth-form-options {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 1rem 0;
            font-size: 0.875rem;
        }
        
        .auth-checkbox-group {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .auth-checkbox {
            width: 16px;
            height: 16px;
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 4px;
            background: rgba(255, 255, 255, 0.1);
        }
        
        .auth-link {
            color: rgba(139, 92, 246, 0.8);
            text-decoration: none;
            transition: color 0.2s ease;
        }
        
        .auth-link:hover {
            color: rgba(139, 92, 246, 1);
        }
        
        /* AUTH SUBMIT BUTTON */
        .auth-submit-button {
            width: 100%;
            padding: 1rem;
            background: linear-gradient(135deg, rgba(79, 70, 229, 0.8), rgba(67, 56, 202, 0.6)) !important;
            border: 1px solid rgba(139, 92, 246, 0.4) !important;
            border-radius: 12px;
            color: white !important;
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            margin: 1.5rem 0;
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
        }
        
        .auth-submit-button:focus,
        .auth-submit-button:active {
            background: linear-gradient(135deg, rgba(79, 70, 229, 0.8), rgba(67, 56, 202, 0.6)) !important;
            border: 1px solid rgba(139, 92, 246, 0.6) !important;
            color: white !important;
            outline: none;
            box-shadow: 0 0 0 3px rgba(139, 92, 246, 0.2);
        }
        
        .auth-submit-button.cta-with-lights::before {
            animation: runningLight 3s linear infinite;
        }
        
        .auth-submit-button:hover {
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.9), rgba(79, 70, 229, 0.7));
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(139, 92, 246, 0.4);
        }
        
        /* FORM TOGGLE */
        .auth-form-toggle {
            text-align: center;
            padding-top: 1rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            color: rgba(255, 255, 255, 0.7);
            font-size: 0.875rem;
        }
        
        .auth-form-toggle button {
            background: none;
            border: none;
            color: rgba(139, 92, 246, 0.8);
            cursor: pointer;
            font-weight: 500;
            transition: color 0.2s ease;
        }
        
        .auth-form-toggle button:hover {
            color: rgba(139, 92, 246, 1);
        }
        
        /* ERROR AND SUCCESS STATES */
        .auth-error {
            color: #ef4444;
            font-size: 0.75rem;
            margin-top: 0.25rem;
        }
        
        .auth-success {
            color: #10b981;
            font-size: 0.75rem;
            margin-top: 0.25rem;
        }
        
        /* ENHANCED LOADING STATE */
        .auth-loading {
            display: inline-block;
            width: 24px;
            height: 24px;
            border: 3px solid rgba(139, 92, 246, 0.3);
            border-radius: 50%;
            border-top-color: rgba(139, 92, 246, 0.8);
            animation: spin 0.8s linear infinite;
            margin-left: 8px;
        }
        
        /* Loading overlay to indicate system is busy */
        .auth-loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.1);
            z-index: 999;
            display: none;
            pointer-events: none;
            transition: opacity 0.2s ease;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        /* Button pulse animation during loading */
        .auth-submit-button.loading {
            animation: pulse 1.5s infinite;
        }
        
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(139, 92, 246, 0.4); }
            70% { box-shadow: 0 0 0 12px rgba(139, 92, 246, 0); }
            100% { box-shadow: 0 0 0 0 rgba(139, 92, 246, 0); }
        }
        
        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        
        /* Enhanced responsive modal */
        @media (max-width: 768px) {
            .auth-modal {
                width: 95%;
                padding: 1.5rem;
                max-height: 95vh;
            }
            
            .social-login-section {
                gap: 0.75rem;
            }
            
            .social-button {
                padding: 0.75rem;
                font-size: 0.875rem;
            }
            
            .navbar-content {
                padding: 0 2rem;
            }
        }
    </style>

    
    <!-- Dashboard specific styles -->
    <style>
        * { 
            font-family: 'Inter', sans-serif; 
        }
        
        /* Dashboard Architecture Styles - Updated to match login page */
        .dashboard-gradient {
            background: linear-gradient(135deg, #0f172a 0%, #1e1b4b 25%, #312e81 50%, #4338ca 100%);
        }
        
        .glass-morphism {
            background: linear-gradient(135deg, rgba(67, 56, 202, 0.15), rgba(30, 27, 75, 0.1));
            backdrop-filter: blur(25px);
            border: 1px solid rgba(139, 92, 246, 0.3);
            box-shadow: 0 25px 50px rgba(67, 56, 202, 0.3);
        }
        
        .nav-glass {
            background: linear-gradient(135deg, rgba(67, 56, 202, 0.2), rgba(30, 27, 75, 0.15));
            backdrop-filter: blur(25px);
            border-right: 1px solid rgba(139, 92, 246, 0.3);
        }
        
        /* Interactive Card Animations */
        .dashboard-card {
            transition: all 0.4s cubic-bezier(0.16, 1, 0.3, 1);
            transform: translateY(0);
        }
        
        .dashboard-card:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow:
                0 30px 60px rgba(67, 56, 202, 0.4),
                0 0 0 1px rgba(139, 92, 246, 0.5),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
        }
        
        .dashboard-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, transparent, rgba(139, 92, 246, 0.1), transparent);
            opacity: 0;
            transition: opacity 0.3s ease;
            border-radius: inherit;
            pointer-events: none;
        }
        
        .dashboard-card:hover::before {
            opacity: 1;
        }
        
        /* Navigation Styles */
        .nav-item {
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .nav-item:hover {
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.2), rgba(67, 56, 202, 0.1));
        }
        
        .nav-item.active {
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.3), rgba(67, 56, 202, 0.2));
            border-right: 3px solid #8b5cf6;
        }
        
        .nav-item.active::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 4px;
            background: linear-gradient(180deg, #8b5cf6, #3b82f6);
        }
        
        /* Legal Theme Colors */
        .legal-primary { color: #1e40af; }
        .legal-secondary { color: #8b5cf6; }
        .legal-accent { color: #059669; }
        
        /* Gradient Text */
        .gradient-text {
            background: linear-gradient(135deg, #ffffff, #e5e7eb);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .legal-gradient-text {
            background: linear-gradient(135deg, #8b5cf6, #3b82f6, #059669);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        /* Loading Animation */
        @keyframes pulse-glow {
            0%, 100% { 
                box-shadow: 0 0 20px rgba(139, 92, 246, 0.3);
            }
            50% { 
                box-shadow: 0 0 40px rgba(139, 92, 246, 0.6);
            }
        }
        
        .loading-pulse {
            animation: pulse-glow 2s ease-in-out infinite;
        }
        
        /* Responsive Design */
        @media (max-width: 768px) {
            .dashboard-grid {
                grid-template-columns: 1fr;
                gap: 1rem;
            }
            
            .sidebar {
                transform: translateX(-100%);
                transition: transform 0.3s ease;
            }
            
            .sidebar.mobile-open {
                transform: translateX(0);
            }
        }
        
        /* Page Transition */
        .page-content {
            transition: opacity 0.3s ease, transform 0.3s ease;
        }
        
        .page-content.hidden {
            opacity: 0;
            transform: translateY(20px);
            pointer-events: none;
        }
        
        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: rgba(15, 23, 42, 0.3);
        }
        
        ::-webkit-scrollbar-thumb {
            background: linear-gradient(180deg, #8b5cf6, #3b82f6);
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(180deg, #7c3aed, #2563eb);
        }
        
        /* View Toggle Styles */
        .view-toggle {
            background: rgba(255, 255, 255, 0.05);
        }
        
        .view-toggle.active {
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.3), rgba(67, 56, 202, 0.2));
            color: #8b5cf6;
        }
        
        .view-toggle:hover {
            background: rgba(255, 255, 255, 0.1);
        }
    </style>
    
    <style>
        /* Combined navigation styles */
        .page-section {
            display: none;
        }
        
        .page-section.active {
            display: block;
        }
        
        .nav-toggle {
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .nav-toggle:hover {
            opacity: 0.8;
        }
    </style>
</head>
<body class="text-white antialiased overflow-x-hidden">
    <!-- Landing Page Section -->
    <div id="landing-page" class="page-section active">
        
    <!-- TUNNEL SHADER BACKGROUND - AMAZING ANIMATION -->
    <canvas id="shader-canvas"></canvas>
    
    <!-- Full Width Glass Navbar -->
    <nav class="floating-navbar">
        <div class="navbar-content">
            <!-- Left Section: Logo only -->
            <div class="flex items-center gap-3">
                <div class="w-10 h-10 rounded-xl bg-gradient-to-br from-purple-400/40 to-blue-500/30 flex items-center justify-center border border-purple-300/40 relative overflow-hidden shadow-lg">
                    <!-- Law + Brain Symbol -->
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="text-white">
                        <!-- Scales of Justice Base -->
                        <path d="M12 3v18"/>
                        <path d="M8 6l4-3 4 3"/>
                        <!-- Brain Circuit Pattern (subtle) -->
                        <circle cx="9" cy="9" r="1" opacity="0.7"/>
                        <circle cx="15" cy="9" r="1" opacity="0.7"/>
                        <circle cx="12" cy="12" r="1" opacity="0.7"/>
                        <path d="M9 9L12 12L15 9" opacity="0.5"/>
                        <!-- Scale Pans -->
                        <path d="M6 8h4M14 8h4"/>
                        <path d="M6 8v2a2 2 0 1 0 4 0v-2M14 8v2a2 2 0 1 0 4 0v-2"/>
                    </svg>
                    <!-- Enhanced glow effect -->
                    <div class="absolute inset-0 bg-gradient-to-r from-purple-400/15 to-blue-400/15 rounded-xl"></div>
                </div>
                <span class="text-xl font-bold tracking-tight text-white font-['Playfair_Display'] 
                       bg-gradient-to-r from-purple-200 via-white to-blue-200 bg-clip-text text-transparent
                       drop-shadow-sm">Anwalts-AI</span>
            </div>
            
            <!-- Center Section: Navigation -->
            <div class="hidden md:flex items-center gap-8">
                <a href="#funktionen" class="text-sm font-medium text-gray-300 hover:text-white transition-colors px-3 py-2 rounded-lg hover:bg-white/10">Funktionen</a>
                <a href="#erfolgsgeschichten" class="text-sm font-medium text-gray-300 hover:text-white transition-colors px-3 py-2 rounded-lg hover:bg-white/10">Erfolgsgeschichten</a>
                <a href="#preise" class="text-sm font-medium text-gray-300 hover:text-white transition-colors px-3 py-2 rounded-lg hover:bg-white/10">Preise</a>
            </div>
            
            <!-- Right Section: Auth & CTA -->
            <div class="hidden md:flex items-center gap-4">
                <button class="text-sm font-medium text-gray-300 hover:text-white transition-colors px-3 py-2 rounded-lg hover:bg-white/10">
                    Anmelden
                </button>
                <button class="cta-with-lights bg-gradient-to-r from-purple-500/80 to-blue-500/80 hover:from-purple-500 hover:to-blue-500 text-white px-6 py-2.5 rounded-lg text-sm font-semibold border border-white/20 transition-all shadow-lg hover:shadow-xl hover:scale-[1.02]">
                    Jetzt starten
                </button>
            </div>
        </div>
    </nav>

    <!-- AUTHENTICATION MODAL -->
    <div class="auth-modal-overlay" id="authModal">
        <div class="auth-modal" id="authModalContent">
            <div class="auth-modal-header">
                <h2 class="auth-modal-title" id="authModalTitle">Anmelden</h2>
                <button class="auth-modal-close" id="authModalClose">×</button>
            </div>

            <!-- Social Login Section -->
            <div class="social-login-section">
                <button class="social-button google" id="googleLogin">
                    <svg width="20" height="20" viewBox="0 0 24 24">
                        <path fill="#4285f4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
                        <path fill="#34a853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
                        <path fill="#fbbc05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
                        <path fill="#ea4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
                    </svg>
                    Mit Google anmelden
                </button>
                
                <button class="social-button twitter" id="twitterLogin">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="#1da1f2">
                        <path d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"/>
                    </svg>
                    Mit Twitter anmelden
                </button>
            </div>

            <!-- Divider -->
            <div class="auth-divider">
                <span>oder mit E-Mail</span>
            </div>

            <!-- Authentication Form -->
            <form id="authForm">
                <!-- Name field (only for sign up) -->
                <div class="auth-form-group" id="nameGroup" style="display: none;">
                    <label class="auth-form-label" for="authName">Vollständiger Name</label>
                    <input type="text" id="authName" class="auth-form-input" placeholder="Ihr vollständiger Name">
                    <div class="auth-error" id="nameError"></div>
                </div>

                <!-- Email field -->
                <div class="auth-form-group">
                    <label class="auth-form-label" for="authEmail">E-Mail-Adresse</label>
                    <input type="email" id="authEmail" class="auth-form-input" placeholder="ihre@email.com" required>
                    <div class="auth-error" id="emailError"></div>
                </div>

                <!-- Password field -->
                <div class="auth-form-group">
                    <label class="auth-form-label" for="authPassword">Passwort</label>
                    <input type="password" id="authPassword" class="auth-form-input" placeholder="Ihr Passwort" required>
                    <div class="auth-error" id="passwordError"></div>
                </div>

                <!-- Confirm Password field (only for sign up) -->
                <div class="auth-form-group" id="confirmPasswordGroup" style="display: none;">
                    <label class="auth-form-label" for="authConfirmPassword">Passwort bestätigen</label>
                    <input type="password" id="authConfirmPassword" class="auth-form-input" placeholder="Passwort bestätigen">
                    <div class="auth-error" id="confirmPasswordError"></div>
                </div>

                <!-- Form Options -->
                <div class="auth-form-options" id="authOptions">
                    <label class="auth-checkbox-group" id="rememberMeGroup">
                        <input type="checkbox" class="auth-checkbox" id="rememberMe">
                        <span>Angemeldet bleiben</span>
                    </label>
                    <a href="#" class="auth-link" id="forgotPassword">Passwort vergessen?</a>
                </div>

                <!-- Terms checkbox (only for sign up) -->
                <div class="auth-form-group" id="termsGroup" style="display: none;">
                    <label class="auth-checkbox-group">
                        <input type="checkbox" class="auth-checkbox" id="acceptTerms" name="acceptTerms">
                        <span>Ich akzeptiere die <a href="#" class="auth-link">AGB</a> und <a href="#" class="auth-link">Datenschutzbestimmungen</a></span>
                    </label>
                    <div class="auth-error" id="termsError"></div>
                </div>

                <!-- Submit Button -->
                <button type="submit" class="auth-submit-button cta-with-lights" id="authSubmit">
                    <span id="authSubmitText">Anmelden</span>
                    <div class="auth-loading" id="authLoading" style="display: none;"></div>
                </button>
            </form>

            <!-- Form Toggle -->
            <div class="auth-form-toggle">
                <span id="authToggleText">Noch kein Konto?</span>
                <button type="button" id="authToggleButton">Jetzt registrieren</button>
            </div>
        </div>
    </div>

    <!-- Hero Section -->
    <section class="content min-h-screen flex items-center pt-24 relative">
        <div class="max-w-7xl mx-auto px-6 py-12 z-10 relative">
            <div class="grid lg:grid-cols-2 gap-16 lg:gap-20 items-center">
                <!-- Left Content -->
                <div class="space-y-8 slide-down-glow">
                    <div class="space-y-6">
                        <div class="inline-flex items-center gap-2 px-4 py-2 rounded-full bg-white/10 border border-white/20">
                            <div class="w-2 h-2 bg-green-400 rounded-full animate-pulse"></div>
                            <span class="text-sm font-medium text-gray-200 tracking-wide">Es ist 23:47 Uhr. Ihr Mandant wartet auf den Vertrag. Kennen Sie das?</span>
                        </div>
                        
                        <h1 class="text-4xl lg:text-6xl gradient-text tracking-tighter font-['Playfair_Display'] leading-tight">
                            Schluss mit Überstunden.
                            <span class="block">Hallo, <span class="font-black italic text-transparent bg-gradient-to-r from-purple-300 via-blue-300 to-indigo-300 bg-clip-text drop-shadow-lg font-['Playfair_Display']">Anwalts-AI</span>.</span>
                        </h1>
                        
                        <p class="max-w-lg text-xl text-gray-200 leading-relaxed">
                            Stellen Sie sich vor: Verträge in 3 Minuten statt 3 Stunden. E-Mails, die sich selbst beantworten. 
                            Vorlagen, die schlauer sind als Ihr bester Referendar. <strong>Das ist keine Zukunftsmusik.</strong>
                        </p>
                    </div>
                    
                    <!-- Navigation Dots -->
                    <div class="flex items-center gap-3">
                        <button id="nav-1" class="w-3 h-3 rounded-full bg-white transition-all scale-125"></button>
                        <button id="nav-2" class="w-3 h-3 rounded-full bg-gray-400 hover:bg-gray-200 transition-all"></button>
                        <button id="nav-3" class="w-3 h-3 rounded-full bg-gray-400 hover:bg-gray-200 transition-all"></button>
                        <button id="nav-4" class="w-3 h-3 rounded-full bg-gray-400 hover:bg-gray-200 transition-all"></button>
                    </div>
                    
                    <!-- Feature Highlights -->
                    <div id="feature-details" class="space-y-4">
                        <div class="flex items-center gap-3">
                            <div class="w-2 h-2 bg-blue-400 rounded-full"></div>
                            <span class="text-gray-200">Von 3 Stunden auf 3 Minuten - Vertragsprüfung</span>
                        </div>
                        <div class="flex items-center gap-3">
                            <div class="w-2 h-2 bg-purple-400 rounded-full"></div>
                            <span class="text-gray-200">Perfekte NDAs in unter 2 Minuten</span>
                        </div>
                        <div class="flex items-center gap-3">
                            <div class="w-2 h-2 bg-cyan-400 rounded-full"></div>
                            <span class="text-gray-200">Nie wieder eine Mandanten-Deadline verpassen</span>
                        </div>
                        <div class="flex items-center gap-3">
                            <div class="w-2 h-2 bg-green-400 rounded-full"></div>
                            <span class="text-gray-200">500+ Expertenvorlagen griffbereit</span>
                        </div>
                    </div>
                    
                    <!-- CTA Buttons -->
                    <div class="flex flex-col sm:flex-row gap-4">
                        <button class="legal-button cta-with-lights px-8 py-4 rounded-lg text-white font-medium text-lg">
                            Kostenlos testen
                        </button>
                        <button class="px-8 py-4 bg-white/10 hover:bg-white/20 rounded-lg font-medium text-lg border border-white/20 transition-colors">
                            5-Minuten Demo ansehen
                        </button>
                    </div>
                    
                    <!-- Social Proof -->
                    <div class="text-sm text-gray-300">
                        <p>Bereits über <strong>1.200+ deutsche Anwaltskanzleien</strong> vertrauen Anwalts-AI</p>
                    </div>
                </div>

                <!-- Right Content - Interactive Stacked Cards -->
                <div class="lg:pl-20 xl:pl-24 mt-12 lg:mt-0 relative">
                    <!-- Visual separator -->
                    <div class="absolute left-0 top-0 bottom-0 w-px bg-gradient-to-b from-transparent via-white/20 to-transparent hidden lg:block"></div>
                    <div class="cards-section feature-1-active max-w-md mx-auto lg:mx-0">
                        <!-- Document Processing Card -->
                        <div class="feature-card glass-card rounded-2xl p-6 float-animation min-h-[32rem]">
                            <div class="flex flex-col h-full">
                                <div class="flex items-center gap-3 mb-6">
                                    <div class="w-12 h-12 rounded-xl feature-icon-gradient-1 flex items-center justify-center">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-white">
                                            <path d="M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7l-5-5z"/>
                                            <path d="M14 2v4a2 2 0 0 0 2 2h4"/>
                                            <path d="M10 9H8"/>
                                            <path d="M16 13H8"/>
                                            <path d="M16 17H8"/>
                                        </svg>
                                    </div>
                                    <div>
                                        <span class="text-xs uppercase tracking-wide text-gray-300 font-medium">Dokumentenanalyse</span>
                                        <h3 class="text-2xl font-['Playfair_Display'] tracking-tighter text-white">Von 3 Stunden auf 3 Minuten</h3>
                                    </div>
                                </div>
                                
                                <p class="flex-1 text-lg text-gray-200 mb-6 leading-relaxed">
                                    <strong>"Ich dachte, ich träume."</strong> Dr. Mueller aus Hamburg analysierte einen 40-seitigen 
                                    Gesellschaftsvertrag. Was normalerweise seinen halben Tag kostete, erledigte Anwalts-AI in 3 Minuten. 
                                    <em>Mit 99,2% Genauigkeit.</em>
                                </p>
                                
                                <div class="space-y-3 mb-6">
                                    <div class="flex items-center justify-between text-sm">
                                        <span class="text-gray-300">Zeitersparnis</span>
                                        <span class="text-green-400 font-semibold">94%</span>
                                    </div>
                                    <div class="flex items-center justify-between text-sm">
                                        <span class="text-gray-300">Dokumenttypen</span>
                                        <span class="text-white font-medium">500+</span>
                                    </div>
                                    <div class="flex items-center justify-between text-sm">
                                        <span class="text-gray-300">Genauigkeit</span>
                                        <span class="text-blue-400 font-semibold">99,2%</span>
                                    </div>
                                </div>
                                
                                <div class="mb-6 text-gray-300 text-sm space-y-2">
                                    <ul class="space-y-1">
                                        <li class="flex items-center gap-2">
                                            <div class="w-1 h-1 bg-blue-400 rounded-full"></div>
                                            Verträge, AGBs, Gesellschaftsverträge
                                        </li>
                                        <li class="flex items-center gap-2">
                                            <div class="w-1 h-1 bg-blue-400 rounded-full"></div>
                                            Automatische Risikoanalyse
                                        </li>
                                        <li class="flex items-center gap-2">
                                            <div class="w-1 h-1 bg-blue-400 rounded-full"></div>
                                            Sofortige Verbesserungsvorschläge
                                        </li>
                                    </ul>
                                </div>

                                <button class="w-full py-3 px-4 bg-white/20 hover:bg-white/30 rounded-lg font-medium transition-colors">
                                    Dokument analysieren lassen
                                </button>
                            </div>
                        </div>
                        
                        <!-- Legal Document Creation Card -->
                        <div class="feature-card glass-card rounded-2xl p-6 min-h-[32rem]">
                            <div class="flex flex-col h-full">
                                <div class="flex items-center gap-3 mb-6">
                                    <div class="w-12 h-12 rounded-xl feature-icon-gradient-2 flex items-center justify-center">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-white">
                                            <path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/>
                                            <polyline points="14,2 14,8 20,8"/>
                                            <line x1="16" y1="13" x2="8" y2="13"/>
                                            <line x1="16" y1="17" x2="8" y2="17"/>
                                            <path d="M10 9H8"/>
                                        </svg>
                                    </div>
                                    <div>
                                        <span class="text-xs uppercase tracking-wide text-gray-300 font-medium">Dokumentenerstellung</span>
                                        <h3 class="text-2xl font-['Playfair_Display'] tracking-tighter text-white">Perfekte NDAs in 2 Minuten</h3>
                                    </div>
                                </div>
                                
                                <p class="flex-1 text-lg text-gray-200 mb-6 leading-relaxed">
                                    <strong>"Mein Referendar ist eifersüchtig."</strong> RA Schmidt aus München erstellt jetzt 
                                    NDAs, Arbeitsverträge und Kaufverträge schneller als je zuvor. <em>Rechtssicher. Mandantenspezifisch. Perfektion in Minuten.</em>
                                </p>
                                
                                <div class="space-y-3 mb-6">
                                    <div class="flex items-center justify-between text-sm">
                                        <span class="text-gray-300">Erstellungszeit</span>
                                        <span class="text-green-400 font-semibold">&lt;2 Min</span>
                                    </div>
                                    <div class="flex items-center justify-between text-sm">
                                        <span class="text-gray-300">Vorlagen verfügbar</span>
                                        <span class="text-white font-medium">500+</span>
                                    </div>
                                    <div class="flex items-center justify-between text-sm">
                                        <span class="text-gray-300">Rechtssicherheit</span>
                                        <span class="text-purple-400 font-semibold">100%</span>
                                    </div>
                                </div>

                                <div class="mb-6 text-gray-300 text-sm space-y-2">
                                    <ul class="space-y-1">
                                        <li class="flex items-center gap-2">
                                            <div class="w-1 h-1 bg-purple-400 rounded-full"></div>
                                            NDAs, Arbeitsverträge, Kaufverträge
                                        </li>
                                        <li class="flex items-center gap-2">
                                            <div class="w-1 h-1 bg-purple-400 rounded-full"></div>
                                            Automatische Mandantendaten-Integration
                                        </li>
                                        <li class="flex items-center gap-2">
                                            <div class="w-1 h-1 bg-purple-400 rounded-full"></div>
                                            Aktuelle Rechtsprechung inklusive
                                        </li>
                                    </ul>
                                </div>
                                
                                <button class="w-full py-3 px-4 bg-white/20 hover:bg-white/30 rounded-lg font-medium transition-colors">
                                    Dokument erstellen
                                </button>
                            </div>
                        </div>
                        
                        <!-- Email Management Card -->
                        <div class="feature-card glass-card rounded-2xl p-6 min-h-[32rem]">
                            <div class="flex flex-col h-full">
                                <div class="flex items-center gap-3 mb-6">
                                    <div class="w-12 h-12 rounded-xl feature-icon-gradient-3 flex items-center justify-center">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-white">
                                            <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
                                            <polyline points="22,6 12,13 2,6"/>
                                            <path d="M16 10l-4 4-4-4"/>
                                        </svg>
                                    </div>
                                    <div>
                                        <span class="text-xs uppercase tracking-wide text-gray-300 font-medium">E-Mail-KI</span>
                                        <h3 class="text-2xl font-['Playfair_Display'] tracking-tighter text-white">Nie wieder Deadline verpasst</h3>
                                    </div>
                                </div>
                                
                                <p class="flex-1 text-lg text-gray-200 mb-6 leading-relaxed">
                                    <strong>"280 E-Mails am Tag? Kein Problem mehr."</strong> RA Weber aus Berlin lässt Anwalts-AI 
                                    ihre Mandanten-E-Mails vorsortieren, Deadlines erkennen und Antworten vorschlagen. 
                                    <em>Intelligent. Höflich. Immer pünktlich.</em>
                                </p>
                                
                                <div class="space-y-3 mb-6">
                                    <div class="flex items-center justify-between text-sm">
                                        <span class="text-gray-300">E-Mails pro Tag</span>
                                        <span class="text-cyan-400 font-semibold">Unbegrenzt</span>
                                    </div>
                                    <div class="flex items-center justify-between text-sm">
                                        <span class="text-gray-300">Antwortzeit</span>
                                        <span class="text-white font-medium">Sofort</span>
                                    </div>
                                    <div class="flex items-center justify-between text-sm">
                                        <span class="text-gray-300">Deadline-Erkennung</span>
                                        <span class="text-cyan-400 font-semibold">99,8%</span>
                                    </div>
                                </div>

                                <div class="mb-6 text-gray-300 text-sm space-y-2">
                                    <ul class="space-y-1">
                                        <li class="flex items-center gap-2">
                                            <div class="w-1 h-1 bg-cyan-400 rounded-full"></div>
                                            Automatische Mandanten-Zuordnung
                                        </li>
                                        <li class="flex items-center gap-2">
                                            <div class="w-1 h-1 bg-cyan-400 rounded-full"></div>
                                            Intelligente Antwort-Vorschläge
                                        </li>
                                        <li class="flex items-center gap-2">
                                            <div class="w-1 h-1 bg-cyan-400 rounded-full"></div>
                                            Deadline-Tracking & Erinnerungen
                                        </li>
                                    </ul>
                                </div>
                                
                                <button class="w-full py-3 px-4 bg-white/20 hover:bg-white/30 rounded-lg font-medium transition-colors">
                                    E-Mail-KI aktivieren
                                </button>
                            </div>
                        </div>
                        
                        <!-- Template System Card -->
                        <div class="feature-card glass-card rounded-2xl p-6 min-h-[32rem]">
                            <div class="flex flex-col h-full">
                                <div class="flex items-center gap-3 mb-6">
                                    <div class="w-12 h-12 rounded-xl feature-icon-gradient-4 flex items-center justify-center">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-white">
                                            <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2v11z"/>
                                            <path d="M12 11v6"/>
                                            <path d="M9 14h6"/>
                                        </svg>
                                    </div>
                                    <div>
                                        <span class="text-xs uppercase tracking-wide text-gray-300 font-medium">Experten-Bibliothek</span>
                                        <h3 class="text-2xl font-['Playfair_Display'] tracking-tighter text-white">500+ Expertenvorlagen</h3>
                                    </div>
                                </div>
                                
                                <p class="text-lg text-gray-200 mb-6 flex-1 leading-relaxed">
                                    <strong>"Wie ein Lexikon, das mitdenkt."</strong> Kanzlei Hoffmann & Partner nutzt die 
                                    Vorlagen-Bibliothek von Anwalts-AI. Von Arbeitsrecht bis Zivilprozess - alle Vorlagen 
                                    von führenden Experten erstellt. <em>Immer aktuell. Immer rechtssicher.</em>
                                </p>
                                
                                <div class="space-y-3 mb-6">
                                    <div class="flex items-center justify-between text-sm">
                                        <span class="text-gray-300">Verfügbare Vorlagen</span>
                                        <span class="text-green-400 font-semibold">500+</span>
                                    </div>
                                    <div class="flex items-center justify-between text-sm">
                                        <span class="text-gray-300">Rechtsbereiche</span>
                                        <span class="text-white font-medium">25+</span>
                                    </div>
                                    <div class="flex items-center justify-between text-sm">
                                        <span class="text-gray-300">Monatliche Updates</span>
                                        <span class="text-green-400 font-semibold">50+</span>
                                    </div>
                                </div>

                                <div class="mb-6 text-gray-300 text-sm space-y-2">
                                    <ul class="space-y-1">
                                        <li class="flex items-center gap-2">
                                            <div class="w-1 h-1 bg-green-400 rounded-full"></div>
                                            Arbeits-, Zivil-, Gesellschaftsrecht
                                        </li>
                                        <li class="flex items-center gap-2">
                                            <div class="w-1 h-1 bg-green-400 rounded-full"></div>
                                            Automatische Rechtsprechungs-Updates
                                        </li>
                                        <li class="flex items-center gap-2">
                                            <div class="w-1 h-1 bg-green-400 rounded-full"></div>
                                            Kanzlei-spezifische Anpassungen
                                        </li>
                                    </ul>
                                </div>
                                
                                <button class="w-full py-3 px-4 bg-white/20 hover:bg-white/30 rounded-lg font-medium transition-colors">
                                    Vorlagen durchsuchen
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Testimonials Section -->
    <section class="content py-20 relative" id="erfolgsgeschichten">
        <div class="max-w-7xl mx-auto px-6">
            <div class="text-center mb-16 slide-down-glow">
                <h2 class="text-4xl font-['Playfair_Display'] gradient-text mb-4">
                    Was deutsche Anwälte über Anwalts-AI sagen
                </h2>
                <p class="text-xl text-gray-300 max-w-3xl mx-auto">
                    Echte Erfolgsgeschichten von Kanzleien, die bereits den Schritt in die Zukunft gewagt haben.
                </p>
            </div>
            
            <div class="grid md:grid-cols-3 gap-8">
                <div class="testimonial-card rounded-xl p-6 bounce-animation">
                    <div class="flex items-center gap-4 mb-4">
                        <div class="w-12 h-12 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white font-semibold">
                            DM
                        </div>
                        <div>
                            <h4 class="font-semibold text-white">Dr. Müller</h4>
                            <p class="text-sm text-gray-300">Kanzlei Müller & Partner, Hamburg</p>
                        </div>
                    </div>
                    <p class="text-gray-200 leading-relaxed">
                        "Nach 20 Jahren als Anwalt dachte ich, ich hätte alles gesehen. Anwalts-AI hat meine 
                        Produktivität verdreifacht. Ich gehe wieder pünktlich nach Hause."
                    </p>
                    <div class="flex text-yellow-400 mt-4">
                        ★★★★★
                    </div>
                </div>
                
                <div class="testimonial-card rounded-xl p-6 bounce-animation">
                    <div class="flex items-center gap-4 mb-4">
                        <div class="w-12 h-12 rounded-full bg-gradient-to-br from-green-500 to-teal-600 flex items-center justify-center text-white font-semibold">
                            SW
                        </div>
                        <div>
                            <h4 class="font-semibold text-white">Sandra Weber</h4>
                            <p class="text-sm text-gray-300">Weber Rechtsanwälte, Berlin</p>
                        </div>
                    </div>
                    <p class="text-gray-200 leading-relaxed">
                        "280 E-Mails am Tag waren mein Albtraum. Jetzt sortiert Anwalts-AI alles vor und 
                        schlägt sogar Antworten vor. Ich konzentriere mich wieder aufs Wesentliche."
                    </p>
                    <div class="flex text-yellow-400 mt-4">
                        ★★★★★
                    </div>
                </div>
                
                <div class="testimonial-card rounded-xl p-6 bounce-animation">
                    <div class="flex items-center gap-4 mb-4">
                        <div class="w-12 h-12 rounded-full bg-gradient-to-br from-purple-500 to-pink-600 flex items-center justify-center text-white font-semibold">
                            HP
                        </div>
                        <div>
                            <h4 class="font-semibold text-white">Hoffmann & Partner</h4>
                            <p class="text-sm text-gray-300">Wirtschaftskanzlei, München</p>
                        </div>
                    </div>
                    <p class="text-gray-200 leading-relaxed">
                        "Unsere Mandanten sind begeistert von der Geschwindigkeit. Was früher Tage dauerte, 
                        erledigen wir jetzt in Stunden. Anwalts-AI ist unser Geheimnis."
                    </p>
                    <div class="flex text-yellow-400 mt-4">
                        ★★★★★
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Final CTA Section -->
    <section class="content py-20 relative">
        <div class="max-w-4xl mx-auto px-6 text-center slide-down-glow">
            <h2 class="text-4xl lg:text-5xl font-['Playfair_Display'] gradient-text mb-6">
                Bereit für den nächsten Schritt?
            </h2>
            <p class="text-xl text-gray-200 mb-8 leading-relaxed">
                Über 1.200 deutsche Kanzleien haben bereits den Sprung gewagt. 
                <strong>Testen Sie Anwalts-AI 30 Tage kostenlos.</strong> Ohne Risiko. Ohne Verpflichtung.
            </p>
            <div class="flex flex-col sm:flex-row gap-4 justify-center">
                <button class="legal-button cta-with-lights px-8 py-4 rounded-lg text-white font-medium text-lg">
                    Kostenlos testen
                </button>
                <button class="px-8 py-4 bg-white/10 hover:bg-white/20 rounded-lg font-medium text-lg border border-white/20 transition-colors">
                    Persönliche Demo buchen
                </button>
            </div>
            <p class="text-sm text-gray-400 mt-6">
                Kreditkarte nicht erforderlich • DSGVO-konform • Jederzeit kündbar
            </p>
        </div>
    </section>

    <!-- Scroll Down Indicator -->
    <div class="scroll-indicator" onclick="document.querySelector('#erfolgsgeschichten').scrollIntoView({behavior: 'smooth'})">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M12 5V19M5 12L12 19L19 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
    </div>

    <!-- ENHANCED JAVASCRIPT WITH 3D BALL FALLBACK -->
    <script>
        // Initialize Lucide icons
        lucide.createIcons();
        
        // TUNNEL SHADER ANIMATION - AMAZING WEBGL BACKGROUND
        const canvas = document.getElementById('shader-canvas');
        const renderer = new THREE.WebGLRenderer({ canvas });
        renderer.setSize(window.innerWidth, window.innerHeight);

        const scene = new THREE.Scene();
        const camera = new THREE.OrthographicCamera(-1, 1, 1, -1, 0, 1);

        // Set up shader material with blue/purple theme
        const shaderMaterial = new THREE.ShaderMaterial({
            uniforms: {
                iTime: { value: 0 },
                iResolution: { value: new THREE.Vector3(window.innerWidth, window.innerHeight, 1) },
            },
            vertexShader: `
                void main() {
                    gl_Position = vec4(position, 1.0);
                }
            `,
            fragmentShader: `
                uniform float iTime;
                uniform vec3 iResolution;

                //Constants
                #define TAU 6.2831853071795865

                //Parameters - Updated colors for blue/purple theme
                #define TUNNEL_LAYERS 96
                #define RING_POINTS 128
                #define POINT_SIZE 1.8
                #define POINT_COLOR_A vec3(0.5, 0.3, 0.8)  // Purple
                #define POINT_COLOR_B vec3(0.3, 0.4, 0.9)  // Blue
                #define SPEED 0.4

                //Square of x
                float sq(float x) {
                    return x*x;   
                }

                //Angular repeat
                vec2 AngRep(vec2 uv, float angle) {
                    vec2 polar = vec2(atan(uv.y, uv.x), length(uv));
                    polar.x = mod(polar.x + angle / 2.0, angle) - angle / 2.0; 
                    return polar.y * vec2(cos(polar.x), sin(polar.x));
                }

                //Signed distance to circle
                float sdCircle(vec2 uv, float r) {
                    return length(uv) - r;
                }

                //Mix a shape defined by a distance field 'sd' with a 'target' color using the 'fill' color.
                vec3 MixShape(float sd, vec3 fill, vec3 target) {
                    float blend = smoothstep(0.0, 1.0/iResolution.y, sd);
                    return mix(fill, target, blend);
                }

                //Tunnel/Camera path
                vec2 TunnelPath(float x) {
                    vec2 offs = vec2(0, 0);
                    
                    offs.x = 0.2 * sin(TAU * x * 0.5) + 0.4 * sin(TAU * x * 0.2 + 0.3);
                    offs.y = 0.3 * cos(TAU * x * 0.3) + 0.2 * cos(TAU * x * 0.1);
                    
                    offs *= smoothstep(1.0, 4.0, x);
                    
                    return offs;
                }

                void main() {
                    vec2 res = iResolution.xy / iResolution.y;
                    vec2 uv = gl_FragCoord.xy / iResolution.y;
                    
                    uv -= res/2.0;
                    
                    vec3 color = vec3(0);
                    
                    float repAngle = TAU / float(RING_POINTS);
                    float pointSize = POINT_SIZE/2.0/iResolution.y;
                    
                    float camZ = iTime * SPEED;
                    vec2 camOffs = TunnelPath(camZ);
                    
                    for(int i = 1; i <= TUNNEL_LAYERS; i++) {
                        float pz = 1.0 - (float(i) / float(TUNNEL_LAYERS));
                        
                        //Scroll the points towards the screen
                        pz -= mod(camZ, 4.0 / float(TUNNEL_LAYERS));
                        
                        //Layer x/y offset
                        vec2 offs = TunnelPath(camZ + pz) - camOffs;
                        
                        //Radius of the current ring
                        float ringRad = 0.15 * (1.0 / sq(pz * 0.8 + 0.4));
                        
                        //Only draw points when uv is close to the ring.
                        if(abs(length(uv + offs) - ringRad) < pointSize * 1.5) {
                            //Angular repeated uv coords
                            vec2 aruv = AngRep(uv + offs, repAngle);

                            //Distance to the nearest point
                            float pdist = sdCircle(aruv - vec2(ringRad, 0), pointSize);

                            //Stripes with blue/purple theme
                            vec3 ptColor = (mod(float(i / 2), 2.0) == 0.0) ? POINT_COLOR_A : POINT_COLOR_B;
                            
                            //Distance fade
                            float shade = (1.0-pz);

                            color = MixShape(pdist, ptColor * shade, color);
                        }
                    }
                    
                    gl_FragColor = vec4(color, 1.0);
                }
            `
        });

        // Create a plane to render the shader on
        const geometry = new THREE.PlaneGeometry(2, 2);
        const mesh = new THREE.Mesh(geometry, shaderMaterial);
        scene.add(mesh);

        // Animation variables
        let lastTime = 0;
        const speedMultiplier = 0.15; // Much slower speed for elegance

        // Animation loop
        function animateTunnel(time) {
            requestAnimationFrame(animateTunnel);
            
            time *= 0.001; // Convert to seconds
            const deltaTime = time - lastTime;
            lastTime = time;
            
            shaderMaterial.uniforms.iTime.value += deltaTime * speedMultiplier;
            
            renderer.render(scene, camera);
        }

        // Handle window resize
        window.addEventListener('resize', () => {
            renderer.setSize(window.innerWidth, window.innerHeight);
            shaderMaterial.uniforms.iResolution.value.set(window.innerWidth, window.innerHeight, 1);
        });

        // Start tunnel animation
        animateTunnel(0);
        
        // Scroll-based header shadow
        const navbar = document.querySelector('.floating-navbar');
        let scrolled = false;
        
        window.addEventListener('scroll', () => {
            const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
            
            if (scrollTop > 50 && !scrolled) {
                navbar.classList.add('scrolled');
                scrolled = true;
            } else if (scrollTop <= 50 && scrolled) {
                navbar.classList.remove('scrolled');
                scrolled = false;
            }
        });
        
        // AUTHENTICATION MODAL SYSTEM
        const authModal = document.getElementById('authModal');
        const authModalContent = document.getElementById('authModalContent');
        const authModalClose = document.getElementById('authModalClose');
        const authModalTitle = document.getElementById('authModalTitle');
        const authForm = document.getElementById('authForm');
        const authToggleButton = document.getElementById('authToggleButton');
        const authToggleText = document.getElementById('authToggleText');
        const authSubmitText = document.getElementById('authSubmitText');
        const authSubmit = document.getElementById('authSubmit');
        const authLoading = document.getElementById('authLoading');
        
        // Form elements
        const nameGroup = document.getElementById('nameGroup');
        const confirmPasswordGroup = document.getElementById('confirmPasswordGroup');
        const termsGroup = document.getElementById('termsGroup');
        const rememberMeGroup = document.getElementById('rememberMeGroup');
        const forgotPassword = document.getElementById('forgotPassword');
        
        let isSignUpMode = false;
        
        // Open modal when "Anmelden" button is clicked
        document.querySelector('.floating-navbar button:first-of-type').addEventListener('click', () => {
            openAuthModal();
        });
        
        // Add event listeners to ALL CTA buttons
        document.addEventListener('DOMContentLoaded', () => {
            // Get all CTA buttons that should open the auth modal
            const ctaButtons = document.querySelectorAll('.cta-with-lights, .legal-button');
            
            ctaButtons.forEach(button => {
                // Only add listener if it's not the auth submit button
                if (!button.classList.contains('auth-submit-button')) {
                    button.addEventListener('click', (e) => {
                        e.preventDefault();
                        openAuthModal();
                    });
                }
            });
        });
        
        // Close modal functions
        authModalClose.addEventListener('click', closeAuthModal);
        authModal.addEventListener('click', (e) => {
            if (e.target === authModal) closeAuthModal();
        });
        
        // ESC key to close modal
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && authModal.classList.contains('active')) {
                closeAuthModal();
            }
        });
        
        function openAuthModal() {
            authModal.classList.add('active');
            setTimeout(() => {
                authModalContent.classList.add('active');
            }, 10);
            document.body.style.overflow = 'hidden';
        }
        
        function closeAuthModal() {
            authModalContent.classList.remove('active');
            setTimeout(() => {
                authModal.classList.remove('active');
                document.body.style.overflow = '';
            }, 300);
        }
        
        // Toggle between Sign In and Sign Up
        authToggleButton.addEventListener('click', () => {
            isSignUpMode = !isSignUpMode;
            updateAuthMode();
        });
        
        function updateAuthMode() {
            if (isSignUpMode) {
                // Switch to Sign Up
                authModalTitle.textContent = 'Registrieren';
                authSubmitText.textContent = 'Registrieren';
                authToggleText.textContent = 'Bereits registriert?';
                authToggleButton.textContent = 'Anmelden';
                
                // Show sign up specific fields
                nameGroup.style.display = 'block';
                confirmPasswordGroup.style.display = 'block';
                termsGroup.style.display = 'block';
                
                // Restore required attribute for visible checkbox
                document.getElementById('acceptTerms').required = true;
                
                // Hide sign in specific elements
                rememberMeGroup.style.display = 'none';
                forgotPassword.style.display = 'none';
            } else {
                // Switch to Sign In
                authModalTitle.textContent = 'Anmelden';
                authSubmitText.textContent = 'Anmelden';
                authToggleText.textContent = 'Noch kein Konto?';
                authToggleButton.textContent = 'Jetzt registrieren';
                
                // Hide sign up specific fields
                nameGroup.style.display = 'none';
                confirmPasswordGroup.style.display = 'none';
                termsGroup.style.display = 'none';
                
                // Remove required attribute from hidden checkbox to prevent validation error
                document.getElementById('acceptTerms').required = false;
                
                // Show sign in specific elements
                rememberMeGroup.style.display = 'flex';
                forgotPassword.style.display = 'block';
            }
            clearFormErrors();
        }
        
        // Form validation and submission
        authForm.addEventListener('submit', (e) => {
            e.preventDefault();
            if (validateForm()) {
                submitForm();
            }
        });
        
        function validateForm() {
            clearFormErrors();
            let isValid = true;
            
            const email = document.getElementById('authEmail').value;
            const password = document.getElementById('authPassword').value;
            
            // Email validation
            if (!email) {
                showError('emailError', 'E-Mail-Adresse ist erforderlich');
                isValid = false;
            } else if (!isValidEmail(email)) {
                showError('emailError', 'Bitte geben Sie eine gültige E-Mail-Adresse ein');
                isValid = false;
            }
            
            // Password validation
            if (!password) {
                showError('passwordError', 'Passwort ist erforderlich');
                isValid = false;
            } else if (password.length < 8) {
                showError('passwordError', 'Passwort muss mindestens 8 Zeichen lang sein');
                isValid = false;
            }
            
            if (isSignUpMode) {
                const name = document.getElementById('authName').value;
                const confirmPassword = document.getElementById('authConfirmPassword').value;
                const acceptTerms = document.getElementById('acceptTerms').checked;
                
                // Name validation
                if (!name) {
                    showError('nameError', 'Name ist erforderlich');
                    isValid = false;
                }
                
                // Confirm password validation
                if (!confirmPassword) {
                    showError('confirmPasswordError', 'Passwort bestätigen ist erforderlich');
                    isValid = false;
                } else if (password !== confirmPassword) {
                    showError('confirmPasswordError', 'Passwörter stimmen nicht überein');
                    isValid = false;
                }
                
                // Terms validation
                if (!acceptTerms) {
                    showError('termsError', 'Sie müssen die AGB akzeptieren');
                    isValid = false;
                }
            }
            
            return isValid;
        }
        
        function submitForm() {
            // Show loading state
            authSubmit.disabled = true;
            authSubmitText.textContent = isSignUpMode ? 'Registrieren...' : 'Anmelden...';
            authLoading.style.display = 'inline-block';
            authSubmit.classList.add('loading');
            
            // Add loading overlay
            if (!document.querySelector('.auth-loading-overlay')) {
                const overlay = document.createElement('div');
                overlay.className = 'auth-loading-overlay';
                overlay.style.display = 'block';
                document.body.appendChild(overlay);
            }
            
            // Get form values
            const email = document.getElementById('authEmail').value;
            const password = document.getElementById('authPassword').value;
            
            // Check credentials
            setTimeout(() => {
                // Hide loading state
                authSubmit.disabled = false;
                authSubmitText.textContent = isSignUpMode ? 'Registrieren' : 'Anmelden';
                authLoading.style.display = 'none';
                authSubmit.classList.remove('loading');
                
                // Remove loading overlay
                const overlay = document.querySelector('.auth-loading-overlay');
                if (overlay) {
                    overlay.style.opacity = '0';
                    setTimeout(() => {
                        if (overlay.parentNode) {
                            overlay.parentNode.removeChild(overlay);
                        }
                    }, 200);
                }
                
                // Check for default credentials
                if (email === 'georgekioko9948@gmail.com' && password === 'georgekioko9948@gmail.com') {
                    // Success - redirect to dashboard
                    localStorage.setItem('anwalts_ai_user', JSON.stringify({
                        email: email,
                        name: isSignUpMode ? document.getElementById('authName').value : 'George Kioko',
                        loginTime: new Date().toISOString()
                    }));
                    
                    // Redirect to dashboard
                    window.location.href = '../../anwalts-ai-dashboard.html';
                } else {
                    // Invalid credentials
                    if (isSignUpMode) {
                        alert('Registrierung erfolgreich! Sie können sich jetzt anmelden.');
                        // Switch to sign in mode
                        isSignUpMode = false;
                        updateAuthMode();
                    } else {
                        showError('passwordError', 'Ungültige E-Mail-Adresse oder Passwort');
                    }
                }
            }, 2000);
        }
        
        // Social login handlers
        document.getElementById('googleLogin').addEventListener('click', () => {
            handleSocialLogin('google');
        });
        
        document.getElementById('twitterLogin').addEventListener('click', () => {
            handleSocialLogin('twitter');
        });
        
        function handleSocialLogin(provider) {
            // Show loading state
            const button = document.getElementById(provider + 'Login');
            button.disabled = true;
            button.innerHTML = `<div class="auth-loading"></div> Wird geladen...`;
            
            // Simulate social login
            setTimeout(() => {
                alert(`${provider === 'google' ? 'Google' : 'Twitter'} Anmeldung erfolgreich!`);
                closeAuthModal();
                resetForm();
            }, 1500);
        }
        
        // Utility functions
        function isValidEmail(email) {
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return emailRegex.test(email);
        }
        
        function showError(elementId, message) {
            const errorElement = document.getElementById(elementId);
            errorElement.textContent = message;
        }
        
        function clearFormErrors() {
            const errorElements = document.querySelectorAll('.auth-error');
            errorElements.forEach(element => {
                element.textContent = '';
            });
        }
        
        function resetForm() {
            authForm.reset();
            isSignUpMode = false;
            updateAuthMode();
            
            // Reset social buttons
            document.getElementById('googleLogin').innerHTML = `
                <svg width="20" height="20" viewBox="0 0 24 24">
                    <path fill="#4285f4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
                    <path fill="#34a853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
                    <path fill="#fbbc05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
                    <path fill="#ea4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
                </svg>
                Mit Google anmelden
            `;
            
            document.getElementById('twitterLogin').innerHTML = `
                <svg width="20" height="20" viewBox="0 0 24 24" fill="#1da1f2">
                    <path d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"/>
                </svg>
                Mit Twitter anmelden
            `;
            
            document.getElementById('googleLogin').disabled = false;
            document.getElementById('twitterLogin').disabled = false;
        }
        
        // Card navigation system - EXACT COPY FROM ORIGINAL
        const cardsContainer = document.querySelector('.cards-section');
        const cards = document.querySelectorAll('.feature-card');
        const navButtons = document.querySelectorAll('[id^="nav-"]');
        let activeFeature = 1;
        
        // Touch/drag handling - EXACT COPY FROM ORIGINAL
        cards.forEach((card, index) => {
            let startX, isDragging = false;
            
            card.addEventListener('mousedown', e => initDrag(e, index + 1));
            card.addEventListener('touchstart', e => {
                e.preventDefault();
                initDrag(e.touches[0], index + 1);
            });
            
            function initDrag(e, featureId) {
                if (featureId !== activeFeature) return;
                isDragging = true;
                startX = e.clientX;
                
                document.addEventListener('mousemove', handleDrag);
                document.addEventListener('touchmove', e => handleDrag(e.touches[0]));
                document.addEventListener('mouseup', endDrag);
                document.addEventListener('touchend', endDrag);
            }
            
            function handleDrag(e) {
                if (!isDragging) return;
                const diff = e.clientX - startX;
                
                if (diff > 20) {
                    card.classList.add('dragging-right');
                    card.classList.remove('dragging-left');
                } else if (diff < -20) {
                    card.classList.add('dragging-left');
                    card.classList.remove('dragging-right');
                } else {
                    card.classList.remove('dragging-left', 'dragging-right');
                }
            }
            
            function endDrag() {
                if (!isDragging) return;
                isDragging = false;
                
                if (card.classList.contains('dragging-right')) {
                    switchToFeature(activeFeature === 1 ? 4 : activeFeature - 1);
                } else if (card.classList.contains('dragging-left')) {
                    switchToFeature(activeFeature === 4 ? 1 : activeFeature + 1);
                }
                
                card.classList.remove('dragging-left', 'dragging-right');
                document.removeEventListener('mousemove', handleDrag);
                document.removeEventListener('touchmove', handleDrag);
                document.removeEventListener('mouseup', endDrag);
                document.removeEventListener('touchend', endDrag);
            }
        });
        
        // Navigation button handling - EXACT COPY FROM ORIGINAL
        navButtons.forEach(button => {
            button.addEventListener('click', () => {
                const featureId = parseInt(button.id.split('-')[1]);
                switchToFeature(featureId);
            });
        });
        
        function switchToFeature(featureId) {
            activeFeature = featureId;
            cardsContainer.className = `cards-section feature-${featureId}-active`;
            
            // Update navigation buttons
            navButtons.forEach((button, index) => {
                if (index + 1 === featureId) {
                    button.className = 'w-3 h-3 rounded-full bg-white transition-all scale-125';
                } else {
                    button.className = 'w-3 h-3 rounded-full bg-gray-400 hover:bg-gray-200 transition-all';
                }
            });
        }
        
        // Auto-advance cards every 5 seconds
        setInterval(() => {
            const nextFeature = activeFeature === 4 ? 1 : activeFeature + 1;
            switchToFeature(nextFeature);
        }, 5000);

        // Smooth scroll for navigation links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // Intersection Observer for animations
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        };

        const observer = new IntersectionObserver(entries => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.style.animationPlayState = 'running';
                }
            });
        }, observerOptions);

        // Observe all animated elements
        document.querySelectorAll('.slide-in-up, .fade-in-scale, .slide-down-glow, .bounce-animation, .pulse-glow').forEach(el => {
            observer.observe(el);
        });
        
        // Hide scroll indicator when user scrolls past hero section
        window.addEventListener('scroll', () => {
            const scrollIndicator = document.querySelector('.scroll-indicator');
            const heroSection = document.querySelector('section');
            const heroBottom = heroSection.offsetTop + heroSection.offsetHeight;
            
            if (window.scrollY > heroBottom * 0.5) {
                scrollIndicator.style.opacity = '0';
                scrollIndicator.style.pointerEvents = 'none';
            } else {
                scrollIndicator.style.opacity = '1';
                scrollIndicator.style.pointerEvents = 'auto';
            }
        });
    </script>

    </div>
    
    <!-- Dashboard Section -->
    <div id="dashboard-page" class="page-section">
        
    
    <!-- Main Dashboard Layout -->
    <div class="flex h-screen">
        
        <!-- Sidebar Navigation -->
        <nav class="sidebar nav-glass w-64 min-h-screen fixed left-0 top-0 z-40 flex flex-col">
            <!-- Logo & Brand -->
            <div class="p-6 border-b border-white/10">
                <div class="flex items-center gap-3">
                    <div class="w-10 h-10 rounded-xl bg-gradient-to-br from-purple-500 to-blue-600 flex items-center justify-center">
                        <i data-lucide="scale" class="w-6 h-6 text-white"></i>
                    </div>
                    <div>
                        <h1 class="text-xl font-bold legal-gradient-text">AnwaltsAI</h1>
                        <p class="text-xs text-gray-400">Rechtsinnovation</p>
                    </div>
                </div>
            </div>
            
            <!-- Navigation Menu -->
            <div class="flex-1 p-4">
                <div class="space-y-2">
                    <a href="#dashboard" class="nav-item active flex items-center gap-3 px-4 py-3 rounded-lg text-sm font-medium" data-page="dashboard">
                        <i data-lucide="layout-dashboard" class="w-5 h-5"></i>
                        <span>Dashboard</span>
                    </a>
                    
                    <a href="#emails" class="nav-item flex items-center gap-3 px-4 py-3 rounded-lg text-sm font-medium" data-page="emails">
                        <i data-lucide="mail" class="w-5 h-5"></i>
                        <span>E-Mails</span>
                        <span class="ml-auto bg-red-500 text-xs px-2 py-1 rounded-full">3</span>
                    </a>
                    
                    <a href="#generator" class="nav-item flex items-center gap-3 px-4 py-3 rounded-lg text-sm font-medium" data-page="generator">
                        <i data-lucide="file-text" class="w-5 h-5"></i>
                        <span>Dokument Generator</span>
                    </a>
                    
                    <a href="#templates" class="nav-item flex items-center gap-3 px-4 py-3 rounded-lg text-sm font-medium" data-page="templates">
                        <i data-lucide="bookmark" class="w-5 h-5"></i>
                        <span>Vorlagen</span>
                    </a>
                    
                    <div class="border-t border-white/10 my-4"></div>
                    
                    <a href="#analytics" class="nav-item flex items-center gap-3 px-4 py-3 rounded-lg text-sm font-medium" data-page="analytics">
                        <i data-lucide="bar-chart-3" class="w-5 h-5"></i>
                        <span>Statistiken</span>
                    </a>
                    
                    <a href="#settings" class="nav-item flex items-center gap-3 px-4 py-3 rounded-lg text-sm font-medium" data-page="settings">
                        <i data-lucide="settings" class="w-5 h-5"></i>
                        <span>Einstellungen</span>
                    </a>
                </div>
            </div>
            
            <!-- User Profile -->
            <div class="p-4 border-t border-white/10">
                <div class="flex items-center gap-3 p-3 rounded-lg glass-morphism">
                    <div class="w-10 h-10 rounded-full bg-gradient-to-br from-purple-500 to-blue-600 flex items-center justify-center">
                        <span class="text-sm font-semibold">AV</span>
                    </div>
                    <div class="flex-1">
                        <p class="text-sm font-medium">Dr. Anna Vogel</p>
                        <p class="text-xs text-gray-400">Partner</p>
                    </div>
                    <button class="text-gray-400 hover:text-white">
                        <i data-lucide="log-out" class="w-4 h-4"></i>
                    </button>
                </div>
            </div>
        </nav>
        
        <!-- Main Content Area -->
        <main class="flex-1 ml-64 min-h-screen">
            
            <!-- Top Header -->
            <header class="glass-morphism border-b border-white/10 p-6">
                <div class="flex items-center justify-between">
                    <div>
                        <h2 class="text-2xl font-bold gradient-text">Willkommen zurück, Dr. Vogel</h2>
                        <p class="text-gray-400">Heute ist ein guter Tag für Rechtsinnovation</p>
                    </div>
                    
                    <div class="flex items-center gap-4">
                        <!-- Quick Actions -->
                        <button class="glass-morphism p-3 rounded-lg hover:bg-white/10 transition-colors">
                            <i data-lucide="search" class="w-5 h-5"></i>
                        </button>
                        
                        <button class="glass-morphism p-3 rounded-lg hover:bg-white/10 transition-colors relative">
                            <i data-lucide="bell" class="w-5 h-5"></i>
                            <span class="absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full"></span>
                        </button>
                        
                        <!-- Mobile Menu Toggle -->
                        <button class="md:hidden glass-morphism p-3 rounded-lg" id="mobile-menu-toggle">
                            <i data-lucide="menu" class="w-5 h-5"></i>
                        </button>
                    </div>
                </div>
            </header>
            
            <!-- Page Content Container -->
            <div class="p-6 space-y-6">
                
                <!-- Dashboard Home Page -->
                <section id="page-dashboard" class="page-content">
                    <div class="space-y-6">
                        
                        <!-- Quick Stats -->
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                            <div class="glass-morphism p-6 rounded-2xl">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="text-gray-400 text-sm">Dokumente heute</p>
                                        <p class="text-3xl font-bold legal-gradient-text">12</p>
                                    </div>
                                    <div class="w-12 h-12 bg-green-500/20 rounded-xl flex items-center justify-center">
                                        <i data-lucide="file-check" class="w-6 h-6 text-green-400"></i>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="glass-morphism p-6 rounded-2xl">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="text-gray-400 text-sm">Gespeicherte Zeit</p>
                                        <p class="text-3xl font-bold legal-gradient-text">4.5h</p>
                                    </div>
                                    <div class="w-12 h-12 bg-blue-500/20 rounded-xl flex items-center justify-center">
                                        <i data-lucide="clock" class="w-6 h-6 text-blue-400"></i>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="glass-morphism p-6 rounded-2xl">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="text-gray-400 text-sm">Erfolgsrate</p>
                                        <p class="text-3xl font-bold legal-gradient-text">94%</p>
                                    </div>
                                    <div class="w-12 h-12 bg-purple-500/20 rounded-xl flex items-center justify-center">
                                        <i data-lucide="trending-up" class="w-6 h-6 text-purple-400"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Main Dashboard Cards -->
                        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                            
                            <!-- Document Generator Card -->
                            <div class="dashboard-card glass-morphism rounded-2xl p-8 relative overflow-hidden cursor-pointer" data-navigate="generator">
                                <div class="relative z-10">
                                    <div class="flex items-center gap-4 mb-6">
                                        <div class="w-16 h-16 bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl flex items-center justify-center">
                                            <i data-lucide="file-plus" class="w-8 h-8 text-white"></i>
                                        </div>
                                        <div>
                                            <h3 class="text-xl font-bold">Dokument Generator</h3>
                                            <p class="text-gray-400 text-sm">Erstellen Sie Rechtsdokumente mit KI</p>
                                        </div>
                                    </div>
                                    
                                    <p class="text-gray-300 mb-6 leading-relaxed">
                                        Nutzen Sie unsere spezialisierte KI, um deutsche Rechtsdokumente schnell und präzise zu erstellen.
                                    </p>
                                    
                                    <div class="space-y-3 mb-6">
                                        <div class="flex items-center gap-2 text-sm text-gray-400">
                                            <i data-lucide="check" class="w-4 h-4 text-green-400"></i>
                                            <span>Mahnung & Zahlungserinnerung</span>
                                        </div>
                                        <div class="flex items-center gap-2 text-sm text-gray-400">
                                            <i data-lucide="check" class="w-4 h-4 text-green-400"></i>
                                            <span>Verträge & Vereinbarungen</span>
                                        </div>
                                        <div class="flex items-center gap-2 text-sm text-gray-400">
                                            <i data-lucide="check" class="w-4 h-4 text-green-400"></i>
                                            <span>Rechtsberatung & Gutachten</span>
                                        </div>
                                    </div>
                                    
                                    <button class="w-full py-3 px-4 bg-white/10 hover:bg-white/20 rounded-lg font-medium transition-colors flex items-center justify-center gap-2">
                                        <span>Jetzt starten</span>
                                        <i data-lucide="arrow-right" class="w-4 h-4"></i>
                                    </button>
                                </div>
                            </div>
                            
                            <!-- Email Management Card -->
                            <div class="dashboard-card glass-morphism rounded-2xl p-8 relative overflow-hidden cursor-pointer" data-navigate="emails">
                                <div class="relative z-10">
                                    <div class="flex items-center gap-4 mb-6">
                                        <div class="w-16 h-16 bg-gradient-to-br from-purple-500 to-purple-600 rounded-2xl flex items-center justify-center">
                                            <i data-lucide="mail" class="w-8 h-8 text-white"></i>
                                        </div>
                                        <div>
                                            <h3 class="text-xl font-bold">E-Mail Verwaltung</h3>
                                            <p class="text-gray-400 text-sm">Verwalten Sie Ihre Korrespondenz</p>
                                        </div>
                                    </div>
                                    
                                    <p class="text-gray-300 mb-6 leading-relaxed">
                                        Zentrale Verwaltung aller eingehenden E-Mails mit intelligenter KI-Unterstützung für Antworten.
                                    </p>
                                    
                                    <div class="space-y-3 mb-6">
                                        <div class="flex items-center justify-between text-sm">
                                            <span class="text-gray-400">Ungelesene E-Mails</span>
                                            <span class="bg-red-500 text-white px-2 py-1 rounded text-xs">3 neue</span>
                                        </div>
                                        <div class="flex items-center justify-between text-sm">
                                            <span class="text-gray-400">Heute bearbeitet</span>
                                            <span class="text-white font-medium">8</span>
                                        </div>
                                        <div class="flex items-center justify-between text-sm">
                                            <span class="text-gray-400">KI-Antworten generiert</span>
                                            <span class="text-white font-medium">5</span>
                                        </div>
                                    </div>
                                    
                                    <button class="w-full py-3 px-4 bg-white/10 hover:bg-white/20 rounded-lg font-medium transition-colors flex items-center justify-center gap-2">
                                        <span>Postfach öffnen</span>
                                        <i data-lucide="arrow-right" class="w-4 h-4"></i>
                                    </button>
                                </div>
                            </div>
                            
                            <!-- Templates Card -->
                            <div class="dashboard-card glass-morphism rounded-2xl p-8 relative overflow-hidden cursor-pointer" data-navigate="templates">
                                <div class="relative z-10">
                                    <div class="flex items-center gap-4 mb-6">
                                        <div class="w-16 h-16 bg-gradient-to-br from-green-500 to-green-600 rounded-2xl flex items-center justify-center">
                                            <i data-lucide="bookmark" class="w-8 h-8 text-white"></i>
                                        </div>
                                        <div>
                                            <h3 class="text-xl font-bold">Vorlagen</h3>
                                            <p class="text-gray-400 text-sm">Gespeicherte Dokumentvorlagen</p>
                                        </div>
                                    </div>
                                    
                                    <p class="text-gray-300 mb-6 leading-relaxed">
                                        Zugriff auf Ihre persönlichen und firmeneigenen Dokumentvorlagen für effizientes Arbeiten.
                                    </p>
                                    
                                    <div class="space-y-3 mb-6">
                                        <div class="flex items-center justify-between text-sm">
                                            <span class="text-gray-400">Persönliche Vorlagen</span>
                                            <span class="text-white font-medium">12</span>
                                        </div>
                                        <div class="flex items-center justify-between text-sm">
                                            <span class="text-gray-400">Firmenvorlagen</span>
                                            <span class="text-white font-medium">8</span>
                                        </div>
                                        <div class="flex items-center justify-between text-sm">
                                            <span class="text-gray-400">Zuletzt verwendet</span>
                                            <span class="text-white font-medium">Heute</span>
                                        </div>
                                    </div>
                                    
                                    <button class="w-full py-3 px-4 bg-white/10 hover:bg-white/20 rounded-lg font-medium transition-colors flex items-center justify-center gap-2">
                                        <span>Vorlagen anzeigen</span>
                                        <i data-lucide="arrow-right" class="w-4 h-4"></i>
                                    </button>
                                </div>
                            </div>
                            
                        </div>
                        
                        <!-- Recent Activity -->
                        <div class="glass-morphism rounded-2xl p-6">
                            <h3 class="text-xl font-bold mb-6 flex items-center gap-2">
                                <i data-lucide="activity" class="w-5 h-5 text-purple-400"></i>
                                Letzte Aktivitäten
                            </h3>
                            
                            <div class="space-y-4">
                                <div class="flex items-center gap-4 p-4 bg-white/5 rounded-lg">
                                    <div class="w-2 h-2 bg-green-400 rounded-full"></div>
                                    <div class="flex-1">
                                        <p class="font-medium">Mahnung für Kunde Schmidt erstellt</p>
                                        <p class="text-sm text-gray-400">vor 2 Stunden</p>
                                    </div>
                                    <span class="text-xs bg-green-500/20 text-green-400 px-2 py-1 rounded">Akzeptiert</span>
                                </div>
                                
                                <div class="flex items-center gap-4 p-4 bg-white/5 rounded-lg">
                                    <div class="w-2 h-2 bg-blue-400 rounded-full"></div>
                                    <div class="flex-1">
                                        <p class="font-medium">E-Mail Antwort generiert</p>
                                        <p class="text-sm text-gray-400">vor 4 Stunden</p>
                                    </div>
                                    <span class="text-xs bg-blue-500/20 text-blue-400 px-2 py-1 rounded">Bearbeitet</span>
                                </div>
                                
                                <div class="flex items-center gap-4 p-4 bg-white/5 rounded-lg">
                                    <div class="w-2 h-2 bg-purple-400 rounded-full"></div>
                                    <div class="flex-1">
                                        <p class="font-medium">Neue Vorlage "NDA" gespeichert</p>
                                        <p class="text-sm text-gray-400">gestern</p>
                                    </div>
                                    <span class="text-xs bg-purple-500/20 text-purple-400 px-2 py-1 rounded">Neu</span>
                                </div>
                            </div>
                        </div>
                        
                    </div>
                </section>
                
                <!-- Placeholder pages for other sections -->
                <section id="page-emails" class="page-content hidden">
                    <div class="space-y-6">
                        
                        <!-- Email Header -->
                        <div class="flex items-center justify-between">
                            <div>
                                <h2 class="text-3xl font-bold legal-gradient-text">E-Mail Verwaltung</h2>
                                <p class="text-gray-400">Zentrale Verwaltung Ihrer Korrespondenz mit KI-Unterstützung</p>
                            </div>
                            <div class="flex items-center gap-3">
                                <button id="refresh-emails" class="glass-morphism px-4 py-2 rounded-lg text-sm hover:bg-white/10 transition-colors">
                                    <i data-lucide="refresh-cw" class="w-4 h-4 mr-2"></i>
                                    Aktualisieren
                                </button>
                                <button id="compose-email" class="bg-purple-600 hover:bg-purple-700 px-4 py-2 rounded-lg text-sm transition-colors">
                                    <i data-lucide="edit" class="w-4 h-4 mr-2"></i>
                                    Neue E-Mail
                                </button>
                            </div>
                        </div>
                        
                        <!-- Email Controls -->
                        <div class="glass-morphism rounded-2xl p-4">
                            <div class="flex flex-col md:flex-row gap-4 items-start md:items-center justify-between">
                                <!-- Search and Filters -->
                                <div class="flex flex-col sm:flex-row gap-3 flex-1">
                                    <div class="relative flex-1 max-w-md">
                                        <i data-lucide="search" class="absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"></i>
                                        <input
                                            type="text"
                                            id="email-search"
                                            placeholder="E-Mails durchsuchen..."
                                            class="w-full pl-10 pr-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:border-purple-400 focus:ring-2 focus:ring-purple-400/20 transition-colors"
                                        >
                                    </div>
                                    
                                    <select id="email-filter" class="bg-white/10 border border-white/20 rounded-lg px-3 py-2 text-white focus:border-purple-400 focus:ring-2 focus:ring-purple-400/20 transition-colors">
                                        <option value="all">Alle E-Mails</option>
                                        <option value="unread">Ungelesen</option>
                                        <option value="ai-responses">Mit KI-Antworten</option>
                                        <option value="attachments">Mit Anhängen</option>
                                        <option value="today">Heute</option>
                                        <option value="week">Diese Woche</option>
                                    </select>
                                </div>
                                
                                <!-- View Toggle -->
                                <div class="flex items-center gap-2">
                                    <span class="text-sm text-gray-400">Ansicht:</span>
                                    <button id="list-view" class="view-toggle active px-3 py-2 rounded-lg text-sm transition-colors">
                                        <i data-lucide="list" class="w-4 h-4"></i>
                                    </button>
                                    <button id="preview-view" class="view-toggle px-3 py-2 rounded-lg text-sm transition-colors">
                                        <i data-lucide="layout-panel-left" class="w-4 h-4"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Email Layout -->
                        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 min-h-[600px]">
                            
                            <!-- Email List -->
                            <div class="lg:col-span-1 glass-morphism rounded-2xl p-4">
                                <div class="flex items-center justify-between mb-4">
                                    <h3 class="text-lg font-semibold">Posteingang</h3>
                                    <span id="email-count" class="text-sm text-gray-400">0 E-Mails</span>
                                </div>
                                
                                <div id="email-list" class="space-y-2 max-h-[500px] overflow-y-auto">
                                    <!-- Email items will be populated by JavaScript -->
                                    <div id="email-loading" class="text-center py-8">
                                        <div class="loading-pulse w-8 h-8 bg-purple-600/20 rounded-full flex items-center justify-center mx-auto mb-3">
                                            <i data-lucide="mail" class="w-4 h-4 text-purple-400"></i>
                                        </div>
                                        <p class="text-gray-400 text-sm">E-Mails werden geladen...</p>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Email Detail View -->
                            <div class="lg:col-span-2 glass-morphism rounded-2xl p-6">
                                <!-- Empty State -->
                                <div id="email-empty-state" class="flex items-center justify-center h-full text-center">
                                    <div>
                                        <i data-lucide="mail-open" class="w-16 h-16 text-gray-400 mx-auto mb-4"></i>
                                        <h4 class="text-lg font-medium text-gray-300 mb-2">E-Mail auswählen</h4>
                                        <p class="text-gray-400 text-sm">Wählen Sie eine E-Mail aus der Liste, um sie anzuzeigen</p>
                                    </div>
                                </div>
                                
                                <!-- Email Detail Content -->
                                <div id="email-detail" class="hidden h-full flex flex-col">
                                    <!-- Email Header -->
                                    <div class="border-b border-white/10 pb-4 mb-4">
                                        <div class="flex items-start justify-between mb-3">
                                            <div class="flex-1">
                                                <h3 id="email-subject" class="text-xl font-semibold mb-2"></h3>
                                                <div class="flex items-center gap-4 text-sm text-gray-400">
                                                    <span id="email-sender"></span>
                                                    <span id="email-date"></span>
                                                    <span id="email-attachments" class="hidden flex items-center gap-1">
                                                        <i data-lucide="paperclip" class="w-4 h-4"></i>
                                                        Anhang
                                                    </span>
                                                </div>
                                            </div>
                                            <div class="flex items-center gap-2">
                                                <button id="reply-email" class="glass-morphism px-3 py-2 rounded-lg text-sm hover:bg-white/10 transition-colors">
                                                    <i data-lucide="reply" class="w-4 h-4 mr-1"></i>
                                                    Antworten
                                                </button>
                                                <button id="forward-email" class="glass-morphism px-3 py-2 rounded-lg text-sm hover:bg-white/10 transition-colors">
                                                    <i data-lucide="forward" class="w-4 h-4 mr-1"></i>
                                                    Weiterleiten
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- Email Content -->
                                    <div id="email-content" class="flex-1 overflow-y-auto mb-4 p-4 bg-white/5 rounded-lg">
                                        <!-- Email body will be populated here -->
                                    </div>
                                    
                                    <!-- AI Response Section -->
                                    <div class="border-t border-white/10 pt-4">
                                        <div class="flex items-center justify-between mb-3">
                                            <h4 class="font-semibold flex items-center gap-2">
                                                <i data-lucide="sparkles" class="w-4 h-4 text-purple-400"></i>
                                                KI-Antwort generieren
                                            </h4>
                                            <button id="generate-response" class="bg-purple-600 hover:bg-purple-700 px-4 py-2 rounded-lg text-sm transition-colors">
                                                <i data-lucide="wand-2" class="w-4 h-4 mr-2"></i>
                                                Antwort generieren
                                            </button>
                                        </div>
                                        
                                        <!-- Response Options -->
                                        <div class="grid grid-cols-3 gap-3 mb-3">
                                            <button class="response-type bg-white/5 hover:bg-white/10 p-3 rounded-lg text-sm transition-colors" data-type="professional">
                                                <i data-lucide="briefcase" class="w-4 h-4 mx-auto mb-1"></i>
                                                Professionell
                                            </button>
                                            <button class="response-type bg-white/5 hover:bg-white/10 p-3 rounded-lg text-sm transition-colors" data-type="friendly">
                                                <i data-lucide="smile" class="w-4 h-4 mx-auto mb-1"></i>
                                                Freundlich
                                            </button>
                                            <button class="response-type bg-white/5 hover:bg-white/10 p-3 rounded-lg text-sm transition-colors" data-type="formal">
                                                <i data-lucide="scale" class="w-4 h-4 mx-auto mb-1"></i>
                                                Formal
                                            </button>
                                        </div>
                                        
                                        <!-- Generated Response Area -->
                                        <div id="response-area" class="hidden">
                                            <textarea
                                                id="generated-response"
                                                rows="6"
                                                class="w-full bg-white/10 border border-white/20 rounded-lg px-4 py-3 text-white placeholder-gray-400 focus:border-green-400 focus:ring-2 focus:ring-green-400/20 transition-colors resize-none"
                                                placeholder="Die generierte Antwort wird hier angezeigt..."
                                            ></textarea>
                                            
                                            <div class="flex items-center justify-between mt-3">
                                                <div class="flex items-center gap-3">
                                                    <button id="copy-response" class="glass-morphism px-3 py-2 rounded-lg text-sm hover:bg-white/10 transition-colors">
                                                        <i data-lucide="copy" class="w-4 h-4 mr-1"></i>
                                                        Kopieren
                                                    </button>
                                                    <button id="edit-response" class="glass-morphism px-3 py-2 rounded-lg text-sm hover:bg-white/10 transition-colors">
                                                        <i data-lucide="edit-3" class="w-4 h-4 mr-1"></i>
                                                        Bearbeiten
                                                    </button>
                                                </div>
                                                <button id="send-response" class="bg-green-600 hover:bg-green-700 px-4 py-2 rounded-lg text-sm transition-colors">
                                                    <i data-lucide="send" class="w-4 h-4 mr-2"></i>
                                                    Senden
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                        </div>
                        
                        <!-- Email Statistics -->
                        <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                            <div class="glass-morphism p-4 rounded-xl text-center">
                                <div class="w-8 h-8 bg-blue-500/20 rounded-lg flex items-center justify-center mx-auto mb-2">
                                    <i data-lucide="inbox" class="w-4 h-4 text-blue-400"></i>
                                </div>
                                <p class="text-2xl font-bold" id="stat-total">0</p>
                                <p class="text-xs text-gray-400">Gesamt</p>
                            </div>
                            
                            <div class="glass-morphism p-4 rounded-xl text-center">
                                <div class="w-8 h-8 bg-red-500/20 rounded-lg flex items-center justify-center mx-auto mb-2">
                                    <i data-lucide="mail" class="w-4 h-4 text-red-400"></i>
                                </div>
                                <p class="text-2xl font-bold" id="stat-unread">0</p>
                                <p class="text-xs text-gray-400">Ungelesen</p>
                            </div>
                            
                            <div class="glass-morphism p-4 rounded-xl text-center">
                                <div class="w-8 h-8 bg-purple-500/20 rounded-lg flex items-center justify-center mx-auto mb-2">
                                    <i data-lucide="sparkles" class="w-4 h-4 text-purple-400"></i>
                                </div>
                                <p class="text-2xl font-bold" id="stat-ai-responses">0</p>
                                <p class="text-xs text-gray-400">KI-Antworten</p>
                            </div>
                            
                            <div class="glass-morphism p-4 rounded-xl text-center">
                                <div class="w-8 h-8 bg-green-500/20 rounded-lg flex items-center justify-center mx-auto mb-2">
                                    <i data-lucide="check-circle" class="w-4 h-4 text-green-400"></i>
                                </div>
                                <p class="text-2xl font-bold" id="stat-responded">0</p>
                                <p class="text-xs text-gray-400">Beantwortet</p>
                            </div>
                        </div>
                        
                    </div>
                </section>
                
                <section id="page-generator" class="page-content hidden">
                    <div class="space-y-6">
                        
                        <!-- Generator Header -->
                        <div class="flex items-center justify-between">
                            <div>
                                <h2 class="text-3xl font-bold legal-gradient-text">KI Dokument Generator</h2>
                                <p class="text-gray-400">Erstellen Sie professionelle Rechtsdokumente mit künstlicher Intelligenz</p>
                            </div>
                            <div class="flex items-center gap-3">
                                <button id="clear-generator" class="glass-morphism px-4 py-2 rounded-lg text-sm hover:bg-white/10 transition-colors">
                                    <i data-lucide="refresh-cw" class="w-4 h-4 mr-2"></i>
                                    Zurücksetzen
                                </button>
                                <button id="save-template" class="bg-purple-600 hover:bg-purple-700 px-4 py-2 rounded-lg text-sm transition-colors">
                                    <i data-lucide="bookmark-plus" class="w-4 h-4 mr-2"></i>
                                    Als Vorlage speichern
                                </button>
                            </div>
                        </div>
                        
                        <!-- Main Generator Layout -->
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 min-h-[600px]">
                            
                            <!-- Left Panel - Input Section -->
                            <div class="glass-morphism rounded-2xl p-6 space-y-6">
                                <h3 class="text-xl font-semibold flex items-center gap-2">
                                    <i data-lucide="edit-3" class="w-5 h-5 text-blue-400"></i>
                                    Eingabe & Kontext
                                </h3>
                                
                                <!-- Template Selection -->
                                <div class="space-y-3">
                                    <label class="block text-sm font-medium text-gray-300">
                                        <i data-lucide="bookmark" class="w-4 h-4 inline mr-2"></i>
                                        Vorlage auswählen (optional)
                                    </label>
                                    <select id="template-select" class="w-full bg-white/10 border border-white/20 rounded-lg px-4 py-3 text-white focus:border-purple-400 focus:ring-2 focus:ring-purple-400/20 transition-colors">
                                        <option value="">Keine Vorlage - Freie Erstellung</option>
                                        <option value="mahnung">Mahnung / Zahlungserinnerung</option>
                                        <option value="nda">Geheimhaltungsvereinbarung (NDA)</option>
                                        <option value="beratungsvertrag">Beratungsvertrag</option>
                                        <option value="kaufvertrag">Kaufvertrag</option>
                                        <option value="mietvertrag">Mietvertrag</option>
                                        <option value="arbeitsvertrag">Arbeitsvertrag</option>
                                        <option value="vollmacht">Vollmacht</option>
                                        <option value="widerspruch">Widerspruch</option>
                                    </select>
                                </div>
                                
                                <!-- Document Upload -->
                                <div class="space-y-3">
                                    <label class="block text-sm font-medium text-gray-300">
                                        <i data-lucide="upload" class="w-4 h-4 inline mr-2"></i>
                                        Dokument hochladen (optional)
                                    </label>
                                    <div id="upload-area" class="border-2 border-dashed border-white/20 rounded-lg p-6 text-center hover:border-purple-400 transition-colors cursor-pointer">
                                        <i data-lucide="file-plus" class="w-8 h-8 text-gray-400 mx-auto mb-2"></i>
                                        <p class="text-gray-400 mb-1">PDF oder DOCX Datei hier ablegen</p>
                                        <p class="text-xs text-gray-500">oder klicken zum Auswählen</p>
                                        <input type="file" id="file-input" class="hidden" accept=".pdf,.docx,.doc">
                                    </div>
                                    <div id="uploaded-file" class="hidden bg-white/5 rounded-lg p-3 flex items-center gap-3">
                                        <i data-lucide="file-text" class="w-5 h-5 text-green-400"></i>
                                        <span id="file-name" class="flex-1 text-sm"></span>
                                        <button id="remove-file" class="text-red-400 hover:text-red-300">
                                            <i data-lucide="x" class="w-4 h-4"></i>
                                        </button>
                                    </div>
                                </div>
                                
                                <!-- Prompt Input -->
                                <div class="space-y-3">
                                    <label class="block text-sm font-medium text-gray-300">
                                        <i data-lucide="message-square" class="w-4 h-4 inline mr-2"></i>
                                        Beschreibung & Anweisungen
                                    </label>
                                    <textarea
                                        id="prompt-input"
                                        rows="8"
                                        class="w-full bg-white/10 border border-white/20 rounded-lg px-4 py-3 text-white placeholder-gray-400 focus:border-purple-400 focus:ring-2 focus:ring-purple-400/20 transition-colors resize-none"
                                        placeholder="Beschreiben Sie das gewünschte Dokument...

Beispiele:
• Erstelle eine Mahnung für Kunde Max Mustermann, Rechnungsnummer 2024-001, Betrag 1.500€, Zahlungsziel war der 15.01.2024
• Verfasse einen Beratungsvertrag zwischen unserer Kanzlei und der Firma ABC GmbH für Arbeitsrecht
• Generiere einen Widerspruch gegen einen Bußgeldbescheid wegen Geschwindigkeitsüberschreitung"></textarea>
                                </div>
                                
                                <!-- Additional Options -->
                                <div class="space-y-4">
                                    <div class="flex items-center gap-3">
                                        <input type="checkbox" id="formal-tone" class="w-4 h-4 text-purple-600 bg-white/10 border-white/20 rounded focus:ring-purple-400">
                                        <label for="formal-tone" class="text-sm text-gray-300">Besonders formeller Ton</label>
                                    </div>
                                    <div class="flex items-center gap-3">
                                        <input type="checkbox" id="include-legal-refs" class="w-4 h-4 text-purple-600 bg-white/10 border-white/20 rounded focus:ring-purple-400">
                                        <label for="include-legal-refs" class="text-sm text-gray-300">Gesetzesverweise einbeziehen</label>
                                    </div>
                                </div>
                                
                                <!-- Generate Button -->
                                <button id="generate-btn" onclick="window.documentGenerator?.generateDocument() || alert('Generator not ready')" class="w-full bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 py-4 rounded-lg font-semibold text-lg transition-all duration-300 flex items-center justify-center gap-3 disabled:opacity-50 disabled:cursor-not-allowed">
                                    <i data-lucide="sparkles" class="w-5 h-5"></i>
                                    <span id="generate-text">Dokument generieren</span>
                                </button>
                            </div>
                            
                            <!-- Right Panel - Output Section -->
                            <div class="glass-morphism rounded-2xl p-6 flex flex-col">
                                <div class="flex items-center justify-between mb-6">
                                    <h3 class="text-xl font-semibold flex items-center gap-2">
                                        <i data-lucide="file-text" class="w-5 h-5 text-green-400"></i>
                                        Generiertes Dokument
                                    </h3>
                                    <div class="flex items-center gap-2">
                                        <button id="copy-output" class="glass-morphism px-3 py-2 rounded-lg text-sm hover:bg-white/10 transition-colors" title="Kopieren">
                                            <i data-lucide="copy" class="w-4 h-4"></i>
                                        </button>
                                        <button id="download-output" class="glass-morphism px-3 py-2 rounded-lg text-sm hover:bg-white/10 transition-colors" title="Herunterladen">
                                            <i data-lucide="download" class="w-4 h-4"></i>
                                        </button>
                                    </div>
                                </div>
                                
                                <!-- Output Display -->
                                <div class="flex-1 relative">
                                    <!-- Loading State -->
                                    <div id="loading-state" class="hidden absolute inset-0 flex items-center justify-center bg-white/5 rounded-lg">
                                        <div class="text-center">
                                            <div class="loading-pulse w-16 h-16 bg-purple-600/20 rounded-full flex items-center justify-center mx-auto mb-4">
                                                <i data-lucide="sparkles" class="w-8 h-8 text-purple-400 animate-spin"></i>
                                            </div>
                                            <p class="text-gray-300 font-medium">KI generiert Ihr Dokument...</p>
                                            <p class="text-sm text-gray-400 mt-1">Dies kann einige Sekunden dauern</p>
                                        </div>
                                    </div>
                                    
                                    <!-- Empty State -->
                                    <div id="empty-state" class="flex items-center justify-center h-full text-center">
                                        <div>
                                            <i data-lucide="file-plus" class="w-16 h-16 text-gray-400 mx-auto mb-4"></i>
                                            <h4 class="text-lg font-medium text-gray-300 mb-2">Bereit für die Generierung</h4>
                                            <p class="text-gray-400 text-sm">Füllen Sie die Eingabefelder aus und klicken Sie auf "Generieren"</p>
                                        </div>
                                    </div>
                                    
                                    <!-- Output Text Area -->
                                    <textarea
                                        id="output-text"
                                        class="hidden w-full h-full bg-white/5 border border-white/10 rounded-lg px-4 py-3 text-white placeholder-gray-400 focus:border-green-400 focus:ring-2 focus:ring-green-400/20 transition-colors resize-none"
                                        placeholder="Das generierte Dokument wird hier angezeigt..."
                                    ></textarea>
                                </div>
                                
                                <!-- Feedback Buttons -->
                                <div id="feedback-section" class="hidden mt-6 space-y-4">
                                    <div class="border-t border-white/10 pt-4">
                                        <p class="text-sm text-gray-400 mb-3">Wie bewerten Sie das generierte Dokument?</p>
                                        <div class="grid grid-cols-3 gap-3">
                                            <button id="accept-btn" class="bg-green-600 hover:bg-green-700 py-3 px-4 rounded-lg font-medium transition-colors flex items-center justify-center gap-2">
                                                <i data-lucide="check" class="w-4 h-4"></i>
                                                Akzeptieren
                                            </button>
                                            <button id="improve-btn" class="bg-blue-600 hover:bg-blue-700 py-3 px-4 rounded-lg font-medium transition-colors flex items-center justify-center gap-2">
                                                <i data-lucide="edit-3" class="w-4 h-4"></i>
                                                Verbessern
                                            </button>
                                            <button id="reject-btn" class="bg-red-600 hover:bg-red-700 py-3 px-4 rounded-lg font-medium transition-colors flex items-center justify-center gap-2">
                                                <i data-lucide="x" class="w-4 h-4"></i>
                                                Ablehnen
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                        </div>
                        
                        <!-- Recent Generations -->
                        <div class="glass-morphism rounded-2xl p-6">
                            <h3 class="text-xl font-semibold mb-4 flex items-center gap-2">
                                <i data-lucide="history" class="w-5 h-5 text-purple-400"></i>
                                Letzte Generierungen
                            </h3>
                            
                            <div id="recent-generations" class="space-y-3">
                                <!-- Recent items will be populated by JavaScript -->
                                <div class="text-center py-8 text-gray-400">
                                    <i data-lucide="clock" class="w-8 h-8 mx-auto mb-2"></i>
                                    <p>Noch keine Dokumente generiert</p>
                                </div>
                            </div>
                        </div>
                        
                    </div>
                </section>
                
                <section id="page-templates" class="page-content hidden">
                    <div class="space-y-6">
                        
                        <!-- Templates Header -->
                        <div class="flex items-center justify-between">
                            <div>
                                <h2 class="text-3xl font-bold legal-gradient-text">Vorlagen Verwaltung</h2>
                                <p class="text-gray-400">Verwalten Sie Ihre Dokumentvorlagen für effizientes Arbeiten</p>
                            </div>
                            <div class="flex items-center gap-3">
                                <button id="import-template" class="glass-morphism px-4 py-2 rounded-lg text-sm hover:bg-white/10 transition-colors">
                                    <i data-lucide="upload" class="w-4 h-4 mr-2"></i>
                                    Importieren
                                </button>
                                <button id="create-template" class="bg-green-600 hover:bg-green-700 px-4 py-2 rounded-lg text-sm transition-colors">
                                    <i data-lucide="plus" class="w-4 h-4 mr-2"></i>
                                    Neue Vorlage
                                </button>
                            </div>
                        </div>
                        
                        <!-- Template Categories -->
                        <div class="glass-morphism rounded-2xl p-4">
                            <div class="flex flex-col md:flex-row gap-4 items-start md:items-center justify-between">
                                <!-- Search and Filters -->
                                <div class="flex flex-col sm:flex-row gap-3 flex-1">
                                    <div class="relative flex-1 max-w-md">
                                        <i data-lucide="search" class="absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"></i>
                                        <input
                                            type="text"
                                            id="template-search"
                                            placeholder="Vorlagen durchsuchen..."
                                            class="w-full pl-10 pr-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:border-green-400 focus:ring-2 focus:ring-green-400/20 transition-colors"
                                        >
                                    </div>
                                    
                                    <select id="template-category-filter" class="bg-white/10 border border-white/20 rounded-lg px-3 py-2 text-white focus:border-green-400 focus:ring-2 focus:ring-green-400/20 transition-colors">
                                        <option value="all">Alle Kategorien</option>
                                        <option value="system">System-Vorlagen</option>
                                        <option value="personal">Persönliche Vorlagen</option>
                                        <option value="firm">Firmen-Vorlagen</option>
                                        <option value="contracts">Verträge</option>
                                        <option value="letters">Briefe</option>
                                        <option value="legal">Rechtsdokumente</option>
                                    </select>
                                </div>
                                
                                <!-- View Options -->
                                <div class="flex items-center gap-2">
                                    <span class="text-sm text-gray-400">Sortierung:</span>
                                    <select id="template-sort" class="bg-white/10 border border-white/20 rounded-lg px-3 py-2 text-white text-sm">
                                        <option value="name">Name</option>
                                        <option value="date">Erstellungsdatum</option>
                                        <option value="usage">Häufigkeit</option>
                                        <option value="category">Kategorie</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Templates Grid -->
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                            
                            <!-- System Templates Section -->
                            <div class="md:col-span-2 lg:col-span-3">
                                <h3 class="text-xl font-semibold mb-4 flex items-center gap-2">
                                    <i data-lucide="shield-check" class="w-5 h-5 text-blue-400"></i>
                                    System-Vorlagen
                                </h3>
                            </div>
                            
                            <div id="system-templates" class="md:col-span-2 lg:col-span-3 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                                <!-- System templates will be populated by JavaScript -->
                            </div>
                            
                            <!-- Personal Templates Section -->
                            <div class="md:col-span-2 lg:col-span-3 mt-8">
                                <h3 class="text-xl font-semibold mb-4 flex items-center gap-2">
                                    <i data-lucide="user" class="w-5 h-5 text-purple-400"></i>
                                    Persönliche Vorlagen
                                </h3>
                            </div>
                            
                            <div id="personal-templates" class="md:col-span-2 lg:col-span-3 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                                <!-- Personal templates will be populated by JavaScript -->
                            </div>
                            
                            <!-- Firm Templates Section -->
                            <div class="md:col-span-2 lg:col-span-3 mt-8">
                                <h3 class="text-xl font-semibold mb-4 flex items-center gap-2">
                                    <i data-lucide="building" class="w-5 h-5 text-green-400"></i>
                                    Firmen-Vorlagen
                                </h3>
                            </div>
                            
                            <div id="firm-templates" class="md:col-span-2 lg:col-span-3 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                                <!-- Firm templates will be populated by JavaScript -->
                            </div>
                            
                        </div>
                        
                        <!-- Template Statistics -->
                        <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                            <div class="glass-morphism p-4 rounded-xl text-center">
                                <div class="w-8 h-8 bg-blue-500/20 rounded-lg flex items-center justify-center mx-auto mb-2">
                                    <i data-lucide="file-text" class="w-4 h-4 text-blue-400"></i>
                                </div>
                                <p class="text-2xl font-bold" id="stat-total-templates">0</p>
                                <p class="text-xs text-gray-400">Gesamt</p>
                            </div>
                            
                            <div class="glass-morphism p-4 rounded-xl text-center">
                                <div class="w-8 h-8 bg-purple-500/20 rounded-lg flex items-center justify-center mx-auto mb-2">
                                    <i data-lucide="user" class="w-4 h-4 text-purple-400"></i>
                                </div>
                                <p class="text-2xl font-bold" id="stat-personal-templates">0</p>
                                <p class="text-xs text-gray-400">Persönlich</p>
                            </div>
                            
                            <div class="glass-morphism p-4 rounded-xl text-center">
                                <div class="w-8 h-8 bg-green-500/20 rounded-lg flex items-center justify-center mx-auto mb-2">
                                    <i data-lucide="building" class="w-4 h-4 text-green-400"></i>
                                </div>
                                <p class="text-2xl font-bold" id="stat-firm-templates">0</p>
                                <p class="text-xs text-gray-400">Firma</p>
                            </div>
                            
                            <div class="glass-morphism p-4 rounded-xl text-center">
                                <div class="w-8 h-8 bg-yellow-500/20 rounded-lg flex items-center justify-center mx-auto mb-2">
                                    <i data-lucide="trending-up" class="w-4 h-4 text-yellow-400"></i>
                                </div>
                                <p class="text-2xl font-bold" id="stat-most-used">0</p>
                                <p class="text-xs text-gray-400">Meist genutzt</p>
                            </div>
                        </div>
                        
                    </div>
                </section>
                
                <section id="page-analytics" class="page-content hidden">
                    <div class="text-center py-12">
                        <i data-lucide="bar-chart-3" class="w-16 h-16 text-yellow-400 mx-auto mb-4"></i>
                        <h2 class="text-2xl font-bold mb-2">Statistiken</h2>
                        <p class="text-gray-400">Analytics Interface wird geladen...</p>
                    </div>
                </section>
                
                <section id="page-settings" class="page-content hidden">
                    <div class="text-center py-12">
                        <i data-lucide="settings" class="w-16 h-16 text-gray-400 mx-auto mb-4"></i>
                        <h2 class="text-2xl font-bold mb-2">Einstellungen</h2>
                        <p class="text-gray-400">Settings Interface wird geladen...</p>
                    </div>
                </section>
                
            </div>
            
        </main>
        
    </div>
    
    <!-- JavaScript for Dashboard Functionality -->
    <script>
        // Initialize Lucide Icons
        lucide.createIcons();
        
        // Dashboard Navigation System
        class DashboardNavigation {
            constructor() {
                this.currentPage = 'dashboard';
                this.navItems = document.querySelectorAll('.nav-item');
                this.pages = document.querySelectorAll('.page-content');
                this.dashboardCards = document.querySelectorAll('.dashboard-card[data-navigate]');
                this.mobileMenuToggle = document.getElementById('mobile-menu-toggle');
                this.sidebar = document.querySelector('.sidebar');
                
                this.init();
            }
            
            init() {
                // Navigation event listeners
                this.navItems.forEach(item => {
                    item.addEventListener('click', (e) => {
                        e.preventDefault();
                        const page = item.dataset.page;
                        if (page) {
                            this.navigateToPage(page);
                        }
                    });
                });
                
                // Dashboard card navigation
                this.dashboardCards.forEach(card => {
                    card.addEventListener('click', () => {
                        const page = card.dataset.navigate;
                        if (page) {
                            this.navigateToPage(page);
                        }
                    });
                });
                
                // Mobile menu toggle
                if (this.mobileMenuToggle && this.sidebar) {
                    this.mobileMenuToggle.addEventListener('click', () => {
                        this.sidebar.classList.toggle('mobile-open');
                    });
                }
                
                // Close mobile menu when clicking outside
                document.addEventListener('click', (e) => {
                    if (!this.sidebar.contains(e.target) && !this.mobileMenuToggle.contains(e.target)) {
                        this.sidebar.classList.remove('mobile-open');
                    }
                });
            }
            
            navigateToPage(pageId) {
                // Hide current page
                const currentPageElement = document.getElementById(`page-${this.currentPage}`);
                if (currentPageElement) {
                    currentPageElement.classList.add('hidden');
                }
                
                // Show new page
                const newPageElement = document.getElementById(`page-${pageId}`);
                if (newPageElement) {
                    newPageElement.classList.remove('hidden');
                }
                
                // Update navigation active state
                this.navItems.forEach(item => {
                    item.classList.remove('active');
                    if (item.dataset.page === pageId) {
                        item.classList.add('active');
                    }
                });
                
                this.currentPage = pageId;
                
                // Close mobile menu
                this.sidebar.classList.remove('mobile-open');
                
                // Call page-specific initialization
                this.initializePage(pageId);
            }
            
            initializePage(pageId) {
                switch (pageId) {
                    case 'generator':
                        this.loadDocumentGenerator();
                        break;
                    case 'emails':
                        this.loadEmailInterface();
                        break;
                    case 'templates':
                        this.loadTemplatesInterface();
                        break;
                    default:
                        console.log(`Loading page: ${pageId}`);
                }
            }
            
            // API Placeholder Methods
            loadDocumentGenerator() {
                console.log('API Call: Loading document generator interface...');
                // Initialize document generator when page loads
                if (!window.documentGenerator) {
                    window.documentGenerator = new DocumentGenerator();
                }
            }
            
            loadEmailInterface() {
                console.log('API Call: Loading email interface...');
                // Initialize email manager when page loads
                if (!window.emailManager) {
                    window.emailManager = new EmailManager();
                }
            }
            
            loadTemplatesInterface() {
                console.log('API Call: Loading templates interface...');
                // Initialize template manager when page loads
                if (!window.templateManager) {
                    window.templateManager = new TemplateManager();
                }
            }
        }
        
        // Authentication Functions
        function checkAuthentication() {
            const userData = localStorage.getItem('anwalts_ai_user');
            if (!userData) {
                // Redirect to login if not authenticated
                window.location.href = '.superdesign/design_iterations/anwalts_ai_enhanced.html';
                return false;
            }
            
            const currentUser = JSON.parse(userData);
            updateUserDisplay(currentUser);
            return true;
        }
        
        function updateUserDisplay(user) {
            // Update user avatar and name in header
            const userAvatar = document.querySelector('.user-avatar');
            const userName = document.querySelector('.user-name');
            const userEmail = document.querySelector('.user-email');
            
            if (userAvatar && user.name) {
                userAvatar.textContent = user.name.split(' ').map(n => n[0]).join('').toUpperCase();
            }
            if (userName) userName.textContent = user.name;
            if (userEmail) userEmail.textContent = user.email;
        }
        
        function logout() {
            localStorage.removeItem('anwalts_ai_user');
            window.location.href = '.superdesign/design_iterations/anwalts_ai_enhanced.html';
        }

        // Initialize Dashboard
        document.addEventListener('DOMContentLoaded', () => {
            // Check authentication first
            if (!checkAuthentication()) {
                return;
            }
            
            window.dashboardNavigation = new DashboardNavigation();
            
            // Add logout functionality
            const logoutButton = document.querySelector('[data-action="logout"]');
            if (logoutButton) {
                logoutButton.addEventListener('click', logout);
            }
            
            // Add some interactive feedback for cards
            const cards = document.querySelectorAll('.dashboard-card');
            cards.forEach(card => {
                card.addEventListener('mouseenter', () => {
                    card.style.transform = 'translateY(-8px) scale(1.02)';
                });
                
                card.addEventListener('mouseleave', () => {
                    card.style.transform = 'translateY(0) scale(1)';
                });
            });
        });
        
        // Template Manager Class
        class TemplateManager {
            constructor() {
                this.templates = [];
                this.currentFilter = 'all';
                this.currentSort = 'name';
                this.init();
            }
            
            init() {
                // Get DOM elements
                this.elements = {
                    importTemplate: document.getElementById('import-template'),
                    createTemplate: document.getElementById('create-template'),
                    templateSearch: document.getElementById('template-search'),
                    templateCategoryFilter: document.getElementById('template-category-filter'),
                    templateSort: document.getElementById('template-sort'),
                    systemTemplates: document.getElementById('system-templates'),
                    personalTemplates: document.getElementById('personal-templates'),
                    firmTemplates: document.getElementById('firm-templates'),
                    statTotalTemplates: document.getElementById('stat-total-templates'),
                    statPersonalTemplates: document.getElementById('stat-personal-templates'),
                    statFirmTemplates: document.getElementById('stat-firm-templates'),
                    statMostUsed: document.getElementById('stat-most-used')
                };
                
                this.bindEvents();
                this.loadTemplates();
            }
            
            bindEvents() {
                // Import and create
                this.elements.importTemplate.addEventListener('click', this.importTemplate.bind(this));
                this.elements.createTemplate.addEventListener('click', this.createNewTemplate.bind(this));
                
                // Search and filter
                this.elements.templateSearch.addEventListener('input', this.handleSearch.bind(this));
                this.elements.templateCategoryFilter.addEventListener('change', this.handleFilter.bind(this));
                this.elements.templateSort.addEventListener('change', this.handleSort.bind(this));
            }
            
            async loadTemplates() {
                try {
                    const result = await AnwaltsAI_API.getTemplates();
                    if (result.success) {
                        this.templates = result.templates;
                        this.renderTemplates();
                        this.updateStatistics();
                    }
                } catch (error) {
                    console.error('Error loading templates:', error);
                    this.showError('Fehler beim Laden der Vorlagen');
                }
            }
            
            renderTemplates() {
                const filteredTemplates = this.getFilteredTemplates();
                
                // Group templates by type
                const systemTemplates = filteredTemplates.filter(t => t.type === 'system');
                const personalTemplates = filteredTemplates.filter(t => t.type === 'personal');
                const firmTemplates = filteredTemplates.filter(t => t.type === 'firm');
                
                this.renderTemplateGroup(this.elements.systemTemplates, systemTemplates, 'system');
                this.renderTemplateGroup(this.elements.personalTemplates, personalTemplates, 'personal');
                this.renderTemplateGroup(this.elements.firmTemplates, firmTemplates, 'firm');
            }
            
            renderTemplateGroup(container, templates, type) {
                if (templates.length === 0) {
                    container.innerHTML = `
                        <div class="md:col-span-2 lg:col-span-3 text-center py-8 text-gray-400">
                            <i data-lucide="file-plus" class="w-8 h-8 mx-auto mb-2"></i>
                            <p>Keine ${this.getTypeLabel(type)} gefunden</p>
                        </div>
                    `;
                } else {
                    container.innerHTML = templates.map(template => this.renderTemplateCard(template)).join('');
                }
                
                lucide.createIcons();
            }
            
            renderTemplateCard(template) {
                const iconClass = this.getTemplateIcon(template.category);
                const colorClass = this.getTemplateColor(template.type);
                
                return `
                    <div class="template-card glass-morphism rounded-xl p-6 hover:bg-white/10 transition-all duration-300 cursor-pointer" data-template-id="${template.id}">
                        <div class="flex items-start justify-between mb-4">
                            <div class="flex items-center gap-3">
                                <div class="w-12 h-12 ${colorClass} rounded-xl flex items-center justify-center">
                                    <i data-lucide="${iconClass}" class="w-6 h-6 text-white"></i>
                                </div>
                                <div>
                                    <h4 class="font-semibold text-white">${template.name}</h4>
                                    <p class="text-xs text-gray-400">${this.getTypeLabel(template.type)}</p>
                                </div>
                            </div>
                            <div class="flex items-center gap-1">
                                <button class="text-gray-400 hover:text-white p-1 rounded" onclick="event.stopPropagation(); templateManager.useTemplate('${template.id}')" title="Verwenden">
                                    <i data-lucide="play" class="w-4 h-4"></i>
                                </button>
                                ${template.type !== 'system' ? `
                                    <button class="text-gray-400 hover:text-white p-1 rounded" onclick="event.stopPropagation(); templateManager.editTemplate('${template.id}')" title="Bearbeiten">
                                        <i data-lucide="edit-3" class="w-4 h-4"></i>
                                    </button>
                                    <button class="text-gray-400 hover:text-red-400 p-1 rounded" onclick="event.stopPropagation(); templateManager.deleteTemplate('${template.id}')" title="Löschen">
                                        <i data-lucide="trash-2" class="w-4 h-4"></i>
                                    </button>
                                ` : ''}
                            </div>
                        </div>
                        
                        <div class="space-y-2 mb-4">
                            <div class="flex items-center justify-between text-sm">
                                <span class="text-gray-400">Kategorie:</span>
                                <span class="text-white">${this.getCategoryLabel(template.category)}</span>
                            </div>
                            <div class="flex items-center justify-between text-sm">
                                <span class="text-gray-400">Verwendet:</span>
                                <span class="text-white">${template.usageCount || 0}x</span>
                            </div>
                            <div class="flex items-center justify-between text-sm">
                                <span class="text-gray-400">Erstellt:</span>
                                <span class="text-white">${new Date(template.createdAt || Date.now()).toLocaleDateString('de-DE')}</span>
                            </div>
                        </div>
                        
                        ${template.description ? `<p class="text-sm text-gray-300 mb-4">${template.description}</p>` : ''}
                        
                        <div class="flex items-center gap-2">
                            <button class="flex-1 bg-white/10 hover:bg-white/20 py-2 px-3 rounded-lg text-sm transition-colors" onclick="event.stopPropagation(); templateManager.previewTemplate('${template.id}')">
                                <i data-lucide="eye" class="w-4 h-4 mr-1"></i>
                                Vorschau
                            </button>
                            <button class="flex-1 bg-green-600 hover:bg-green-700 py-2 px-3 rounded-lg text-sm transition-colors" onclick="event.stopPropagation(); templateManager.useTemplate('${template.id}')">
                                <i data-lucide="file-plus" class="w-4 h-4 mr-1"></i>
                                Verwenden
                            </button>
                        </div>
                    </div>
                `;
            }
            
            getFilteredTemplates() {
                let filtered = this.templates;
                
                // Apply search filter
                const searchTerm = this.elements.templateSearch.value.toLowerCase().trim();
                if (searchTerm) {
                    filtered = filtered.filter(template =>
                        template.name.toLowerCase().includes(searchTerm) ||
                        template.description?.toLowerCase().includes(searchTerm) ||
                        template.category.toLowerCase().includes(searchTerm)
                    );
                }
                
                // Apply category filter
                if (this.currentFilter !== 'all') {
                    if (['system', 'personal', 'firm'].includes(this.currentFilter)) {
                        filtered = filtered.filter(template => template.type === this.currentFilter);
                    } else {
                        filtered = filtered.filter(template => template.category === this.currentFilter);
                    }
                }
                
                // Apply sorting
                filtered.sort((a, b) => {
                    switch (this.currentSort) {
                        case 'name':
                            return a.name.localeCompare(b.name);
                        case 'date':
                            return new Date(b.createdAt || 0) - new Date(a.createdAt || 0);
                        case 'usage':
                            return (b.usageCount || 0) - (a.usageCount || 0);
                        case 'category':
                            return a.category.localeCompare(b.category);
                        default:
                            return 0;
                    }
                });
                
                return filtered;
            }
            
            handleSearch() {
                this.renderTemplates();
            }
            
            handleFilter() {
                this.currentFilter = this.elements.templateCategoryFilter.value;
                this.renderTemplates();
            }
            
            handleSort() {
                this.currentSort = this.elements.templateSort.value;
                this.renderTemplates();
            }
            
            useTemplate(templateId) {
                const template = this.templates.find(t => t.id === templateId);
                if (template) {
                    // Increment usage count
                    template.usageCount = (template.usageCount || 0) + 1;
                    
                    // Navigate to document generator with template pre-selected
                    window.dashboardNavigation.navigateToPage('generator');
                    
                    // Wait for generator to load, then set template
                    setTimeout(() => {
                        if (window.documentGenerator && window.documentGenerator.elements.templateSelect) {
                            // Map template ID to select value
                            const selectValue = this.getTemplateSelectValue(template);
                            window.documentGenerator.elements.templateSelect.value = selectValue;
                            window.documentGenerator.handleTemplateChange();
                        }
                    }, 100);
                    
                    console.log('Using template:', template.name);
                }
            }
            
            getTemplateSelectValue(template) {
                // Map template categories to document generator select values
                const mapping = {
                    'payment': 'mahnung',
                    'contracts': 'beratungsvertrag',
                    'legal': 'widerspruch'
                };
                return mapping[template.category] || template.id;
            }
            
            previewTemplate(templateId) {
                const template = this.templates.find(t => t.id === templateId);
                if (template) {
                    alert(`Vorschau für "${template.name}":\n\n${template.description || 'Keine Beschreibung verfügbar'}`);
                }
            }
            
            editTemplate(templateId) {
                const template = this.templates.find(t => t.id === templateId);
                if (template) {
                    const newName = prompt('Neuer Name für die Vorlage:', template.name);
                    if (newName && newName.trim()) {
                        template.name = newName.trim();
                        this.renderTemplates();
                        console.log('Template edited:', template);
                    }
                }
            }
            
            deleteTemplate(templateId) {
                const template = this.templates.find(t => t.id === templateId);
                if (template && confirm(`Möchten Sie die Vorlage "${template.name}" wirklich löschen?`)) {
                    this.templates = this.templates.filter(t => t.id !== templateId);
                    this.renderTemplates();
                    this.updateStatistics();
                    console.log('Template deleted:', template);
                }
            }
            
            createNewTemplate() {
                const name = prompt('Name für die neue Vorlage:');
                if (name && name.trim()) {
                    const newTemplate = {
                        id: 'custom_' + Date.now(),
                        name: name.trim(),
                        type: 'personal',
                        category: 'legal',
                        description: 'Benutzerdefinierte Vorlage',
                        createdAt: new Date().toISOString(),
                        usageCount: 0
                    };
                    
                    this.templates.push(newTemplate);
                    this.renderTemplates();
                    this.updateStatistics();
                    console.log('New template created:', newTemplate);
                }
            }
            
            importTemplate() {
                console.log('Importing template...');
                alert('Template-Import wird implementiert...');
            }
            
            updateStatistics() {
                const total = this.templates.length;
                const personal = this.templates.filter(t => t.type === 'personal').length;
                const firm = this.templates.filter(t => t.type === 'firm').length;
                const mostUsed = Math.max(...this.templates.map(t => t.usageCount || 0));
                
                this.elements.statTotalTemplates.textContent = total;
                this.elements.statPersonalTemplates.textContent = personal;
                this.elements.statFirmTemplates.textContent = firm;
                this.elements.statMostUsed.textContent = mostUsed;
            }
            
            getTemplateIcon(category) {
                const icons = {
                    'contracts': 'file-text',
                    'letters': 'mail',
                    'legal': 'scale',
                    'payment': 'credit-card',
                    'default': 'bookmark'
                };
                return icons[category] || icons.default;
            }
            
            getTemplateColor(type) {
                const colors = {
                    'system': 'bg-gradient-to-br from-blue-500 to-blue-600',
                    'personal': 'bg-gradient-to-br from-purple-500 to-purple-600',
                    'firm': 'bg-gradient-to-br from-green-500 to-green-600'
                };
                return colors[type] || colors.personal;
            }
            
            getTypeLabel(type) {
                const labels = {
                    'system': 'System',
                    'personal': 'Persönlich',
                    'firm': 'Firma'
                };
                return labels[type] || type;
            }
            
            getCategoryLabel(category) {
                const labels = {
                    'contracts': 'Verträge',
                    'letters': 'Briefe',
                    'legal': 'Rechtsdokumente',
                    'payment': 'Zahlungen'
                };
                return labels[category] || category;
            }
            
            showError(message) {
                console.error(message);
                alert(message);
            }
        }

        // Email Manager Class
        class EmailManager {
            constructor() {
                this.emails = [];
                this.currentEmail = null;
                this.currentFilter = 'all';
                this.currentView = 'list';
                this.init();
            }
            
            init() {
                // Get DOM elements
                this.elements = {
                    refreshEmails: document.getElementById('refresh-emails'),
                    composeEmail: document.getElementById('compose-email'),
                    emailSearch: document.getElementById('email-search'),
                    emailFilter: document.getElementById('email-filter'),
                    listView: document.getElementById('list-view'),
                    previewView: document.getElementById('preview-view'),
                    emailList: document.getElementById('email-list'),
                    emailCount: document.getElementById('email-count'),
                    emailLoading: document.getElementById('email-loading'),
                    emailEmptyState: document.getElementById('email-empty-state'),
                    emailDetail: document.getElementById('email-detail'),
                    emailSubject: document.getElementById('email-subject'),
                    emailSender: document.getElementById('email-sender'),
                    emailDate: document.getElementById('email-date'),
                    emailAttachments: document.getElementById('email-attachments'),
                    emailContent: document.getElementById('email-content'),
                    replyEmail: document.getElementById('reply-email'),
                    forwardEmail: document.getElementById('forward-email'),
                    generateResponse: document.getElementById('generate-response'),
                    responseArea: document.getElementById('response-area'),
                    generatedResponse: document.getElementById('generated-response'),
                    copyResponse: document.getElementById('copy-response'),
                    editResponse: document.getElementById('edit-response'),
                    sendResponse: document.getElementById('send-response'),
                    statTotal: document.getElementById('stat-total'),
                    statUnread: document.getElementById('stat-unread'),
                    statAiResponses: document.getElementById('stat-ai-responses'),
                    statResponded: document.getElementById('stat-responded')
                };
                
                this.bindEvents();
                this.loadEmails();
            }
            
            bindEvents() {
                // Refresh and compose
                this.elements.refreshEmails.addEventListener('click', this.loadEmails.bind(this));
                this.elements.composeEmail.addEventListener('click', this.composeNewEmail.bind(this));
                
                // Search and filter
                this.elements.emailSearch.addEventListener('input', this.handleSearch.bind(this));
                this.elements.emailFilter.addEventListener('change', this.handleFilter.bind(this));
                
                // View toggles
                this.elements.listView.addEventListener('click', () => this.switchView('list'));
                this.elements.previewView.addEventListener('click', () => this.switchView('preview'));
                
                // Email actions
                this.elements.replyEmail.addEventListener('click', this.replyToEmail.bind(this));
                this.elements.forwardEmail.addEventListener('click', this.forwardEmail.bind(this));
                this.elements.generateResponse.addEventListener('click', this.generateAIResponse.bind(this));
                
                // Response actions
                this.elements.copyResponse.addEventListener('click', this.copyResponse.bind(this));
                this.elements.editResponse.addEventListener('click', this.editResponse.bind(this));
                this.elements.sendResponse.addEventListener('click', this.sendResponse.bind(this));
                
                // Response type buttons
                document.querySelectorAll('.response-type').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        document.querySelectorAll('.response-type').forEach(b => b.classList.remove('bg-purple-600'));
                        btn.classList.add('bg-purple-600');
                        this.selectedResponseType = btn.dataset.type;
                    });
                });
            }
            
            async loadEmails() {
                this.showLoadingState();
                
                try {
                    const result = await AnwaltsAI_API.getEmails();
                    if (result.success) {
                        this.emails = result.emails;
                        this.renderEmailList();
                        this.updateStatistics();
                    }
                } catch (error) {
                    console.error('Error loading emails:', error);
                    this.showError('Fehler beim Laden der E-Mails');
                }
            }
            
            showLoadingState() {
                this.elements.emailLoading.classList.remove('hidden');
                this.elements.emailList.classList.add('hidden');
            }
            
            renderEmailList() {
                this.elements.emailLoading.classList.add('hidden');
                this.elements.emailList.classList.remove('hidden');
                
                const filteredEmails = this.getFilteredEmails();
                this.elements.emailCount.textContent = `${filteredEmails.length} E-Mails`;
                
                if (filteredEmails.length === 0) {
                    this.elements.emailList.innerHTML = `
                        <div class="text-center py-8 text-gray-400">
                            <i data-lucide="inbox" class="w-8 h-8 mx-auto mb-2"></i>
                            <p>Keine E-Mails gefunden</p>
                        </div>
                    `;
                } else {
                    this.elements.emailList.innerHTML = filteredEmails.map(email => `
                        <div class="email-item p-3 rounded-lg hover:bg-white/5 cursor-pointer transition-colors ${email.read ? '' : 'bg-blue-500/10 border-l-2 border-blue-400'}" data-email-id="${email.id}">
                            <div class="flex items-start justify-between">
                                <div class="flex-1 min-w-0">
                                    <div class="flex items-center gap-2 mb-1">
                                        <p class="font-medium text-sm truncate">${email.sender}</p>
                                        ${email.hasAttachment ? '<i data-lucide="paperclip" class="w-3 h-3 text-gray-400 flex-shrink-0"></i>' : ''}
                                        ${email.hasAIResponse ? '<i data-lucide="sparkles" class="w-3 h-3 text-purple-400 flex-shrink-0"></i>' : ''}
                                    </div>
                                    <p class="text-sm text-gray-300 truncate mb-1">${email.subject}</p>
                                    <p class="text-xs text-gray-400">${this.formatDate(email.date)}</p>
                                </div>
                                <div class="flex items-center gap-1 ml-2">
                                    ${!email.read ? '<div class="w-2 h-2 bg-blue-400 rounded-full"></div>' : ''}
                                </div>
                            </div>
                        </div>
                    `).join('');
                }
                
                // Add click event listeners to email items
                document.querySelectorAll('.email-item').forEach(item => {
                    item.addEventListener('click', () => {
                        const emailId = parseInt(item.dataset.emailId);
                        this.selectEmail(emailId);
                    });
                });
                
                lucide.createIcons();
            }
            
            getFilteredEmails() {
                let filtered = this.emails;
                
                // Apply search filter
                const searchTerm = this.elements.emailSearch.value.toLowerCase().trim();
                if (searchTerm) {
                    filtered = filtered.filter(email =>
                        email.subject.toLowerCase().includes(searchTerm) ||
                        email.sender.toLowerCase().includes(searchTerm) ||
                        email.content.toLowerCase().includes(searchTerm)
                    );
                }
                
                // Apply selected filter
                switch (this.currentFilter) {
                    case 'unread':
                        filtered = filtered.filter(email => !email.read);
                        break;
                    case 'ai-responses':
                        filtered = filtered.filter(email => email.hasAIResponse);
                        break;
                    case 'attachments':
                        filtered = filtered.filter(email => email.hasAttachment);
                        break;
                    case 'today':
                        const today = new Date().toDateString();
                        filtered = filtered.filter(email => new Date(email.date).toDateString() === today);
                        break;
                    case 'week':
                        const weekAgo = new Date();
                        weekAgo.setDate(weekAgo.getDate() - 7);
                        filtered = filtered.filter(email => new Date(email.date) >= weekAgo);
                        break;
                }
                
                return filtered.sort((a, b) => new Date(b.date) - new Date(a.date));
            }
            
            handleSearch() {
                this.renderEmailList();
            }
            
            handleFilter() {
                this.currentFilter = this.elements.emailFilter.value;
                this.renderEmailList();
            }
            
            switchView(view) {
                this.currentView = view;
                document.querySelectorAll('.view-toggle').forEach(btn => btn.classList.remove('active'));
                
                if (view === 'list') {
                    this.elements.listView.classList.add('active');
                } else {
                    this.elements.previewView.classList.add('active');
                }
            }
            
            selectEmail(emailId) {
                const email = this.emails.find(e => e.id === emailId);
                if (!email) return;
                
                this.currentEmail = email;
                
                // Mark as read
                if (!email.read) {
                    email.read = true;
                    AnwaltsAI_API.markEmailAsRead(emailId);
                    this.renderEmailList();
                    this.updateStatistics();
                }
                
                // Show email detail
                this.showEmailDetail(email);
            }
            
            showEmailDetail(email) {
                this.elements.emailEmptyState.classList.add('hidden');
                this.elements.emailDetail.classList.remove('hidden');
                
                this.elements.emailSubject.textContent = email.subject;
                this.elements.emailSender.textContent = email.sender;
                this.elements.emailDate.textContent = this.formatDate(email.date);
                this.elements.emailContent.innerHTML = this.formatEmailContent(email.content);
                
                if (email.hasAttachment) {
                    this.elements.emailAttachments.classList.remove('hidden');
                } else {
                    this.elements.emailAttachments.classList.add('hidden');
                }
                
                // Hide response area initially
                this.elements.responseArea.classList.add('hidden');
            }
            
            formatEmailContent(content) {
                return content.replace(/\n/g, '<br>');
            }
            
            formatDate(dateString) {
                const date = new Date(dateString);
                const now = new Date();
                const diffInHours = (now - date) / (1000 * 60 * 60);
                
                if (diffInHours < 24) {
                    return date.toLocaleTimeString('de-DE', { hour: '2-digit', minute: '2-digit' });
                } else if (diffInHours < 24 * 7) {
                    return date.toLocaleDateString('de-DE', { weekday: 'short', hour: '2-digit', minute: '2-digit' });
                } else {
                    return date.toLocaleDateString('de-DE');
                }
            }
            
            async generateAIResponse() {
                if (!this.currentEmail) return;
                
                const responseType = this.selectedResponseType || 'professional';
                
                try {
                    this.elements.generateResponse.disabled = true;
                    this.elements.generateResponse.innerHTML = '<i data-lucide="loader-2" class="w-4 h-4 mr-2 animate-spin"></i>Generiert...';
                    
                    const result = await AnwaltsAI_API.generateEmailResponse(this.currentEmail, responseType);
                    
                    if (result.success) {
                        this.elements.generatedResponse.value = result.response;
                        this.elements.responseArea.classList.remove('hidden');
                        
                        // Mark email as having AI response
                        this.currentEmail.hasAIResponse = true;
                        this.renderEmailList();
                        this.updateStatistics();
                    }
                } catch (error) {
                    console.error('Error generating response:', error);
                    alert('Fehler beim Generieren der Antwort');
                } finally {
                    this.elements.generateResponse.disabled = false;
                    this.elements.generateResponse.innerHTML = '<i data-lucide="wand-2" class="w-4 h-4 mr-2"></i>Antwort generieren';
                    lucide.createIcons();
                }
            }
            
            copyResponse() {
                navigator.clipboard.writeText(this.elements.generatedResponse.value).then(() => {
                    const originalText = this.elements.copyResponse.innerHTML;
                    this.elements.copyResponse.innerHTML = '<i data-lucide="check" class="w-4 h-4 mr-1"></i>Kopiert!';
                    setTimeout(() => {
                        this.elements.copyResponse.innerHTML = originalText;
                        lucide.createIcons();
                    }, 2000);
                });
            }
            
            editResponse() {
                this.elements.generatedResponse.focus();
                this.elements.generatedResponse.select();
            }
            
            sendResponse() {
                if (!this.elements.generatedResponse.value.trim()) {
                    alert('Bitte geben Sie eine Antwort ein');
                    return;
                }
                
                // Simulate sending
                alert('Antwort wurde gesendet!');
                this.elements.responseArea.classList.add('hidden');
                
                // Mark as responded
                this.currentEmail.responded = true;
                this.updateStatistics();
            }
            
            replyToEmail() {
                if (this.currentEmail) {
                    console.log('Replying to email:', this.currentEmail.id);
                    alert('E-Mail Antwort wird vorbereitet...');
                }
            }
            
            forwardEmail() {
                if (this.currentEmail) {
                    console.log('Forwarding email:', this.currentEmail.id);
                    alert('E-Mail wird weitergeleitet...');
                }
            }
            
            composeNewEmail() {
                console.log('Composing new email');
                alert('Neue E-Mail wird erstellt...');
            }
            
            updateStatistics() {
                const total = this.emails.length;
                const unread = this.emails.filter(e => !e.read).length;
                const aiResponses = this.emails.filter(e => e.hasAIResponse).length;
                const responded = this.emails.filter(e => e.responded).length;
                
                this.elements.statTotal.textContent = total;
                this.elements.statUnread.textContent = unread;
                this.elements.statAiResponses.textContent = aiResponses;
                this.elements.statResponded.textContent = responded;
            }
            
            showError(message) {
                console.error(message);
                alert(message);
            }
        }

        // Document Generator Class
        class DocumentGenerator {
            constructor() {
                this.currentDocument = null;
                this.recentGenerations = JSON.parse(localStorage.getItem('anwalts_recent_generations') || '[]');
                this.init();
            }
            
            init() {
                // Get DOM elements
                this.elements = {
                    templateSelect: document.getElementById('template-select'),
                    uploadArea: document.getElementById('upload-area'),
                    fileInput: document.getElementById('file-input'),
                    uploadedFile: document.getElementById('uploaded-file'),
                    fileName: document.getElementById('file-name'),
                    removeFile: document.getElementById('remove-file'),
                    promptInput: document.getElementById('prompt-input'),
                    formalTone: document.getElementById('formal-tone'),
                    includeLegalRefs: document.getElementById('include-legal-refs'),
                    generateBtn: document.getElementById('generate-btn'),
                    generateText: document.getElementById('generate-text'),
                    loadingState: document.getElementById('loading-state'),
                    emptyState: document.getElementById('empty-state'),
                    outputText: document.getElementById('output-text'),
                    feedbackSection: document.getElementById('feedback-section'),
                    acceptBtn: document.getElementById('accept-btn'),
                    improveBtn: document.getElementById('improve-btn'),
                    rejectBtn: document.getElementById('reject-btn'),
                    copyOutput: document.getElementById('copy-output'),
                    downloadOutput: document.getElementById('download-output'),
                    clearGenerator: document.getElementById('clear-generator'),
                    saveTemplate: document.getElementById('save-template'),
                    recentGenerations: document.getElementById('recent-generations')
                };
                
                this.bindEvents();
                this.loadRecentGenerations();
                this.updateTemplatePrompts();
            }
            
            bindEvents() {
                // File upload events
                this.elements.uploadArea.addEventListener('click', () => this.elements.fileInput.click());
                this.elements.uploadArea.addEventListener('dragover', this.handleDragOver.bind(this));
                this.elements.uploadArea.addEventListener('drop', this.handleFileDrop.bind(this));
                this.elements.fileInput.addEventListener('change', this.handleFileSelect.bind(this));
                this.elements.removeFile.addEventListener('click', this.removeFile.bind(this));
                
                // Template selection
                this.elements.templateSelect.addEventListener('change', this.handleTemplateChange.bind(this));
                
                // Generation
                this.elements.generateBtn.addEventListener('click', this.generateDocument.bind(this));
                
                // Feedback buttons
                this.elements.acceptBtn.addEventListener('click', () => this.submitFeedback('accept'));
                this.elements.improveBtn.addEventListener('click', () => this.submitFeedback('improve'));
                this.elements.rejectBtn.addEventListener('click', () => this.submitFeedback('reject'));
                
                // Utility buttons
                this.elements.copyOutput.addEventListener('click', this.copyToClipboard.bind(this));
                this.elements.downloadOutput.addEventListener('click', this.downloadDocument.bind(this));
                this.elements.clearGenerator.addEventListener('click', this.clearAll.bind(this));
                this.elements.saveTemplate.addEventListener('click', this.saveAsTemplate.bind(this));
            }
            
            handleDragOver(e) {
                e.preventDefault();
                this.elements.uploadArea.classList.add('border-purple-400');
            }
            
            handleFileDrop(e) {
                e.preventDefault();
                this.elements.uploadArea.classList.remove('border-purple-400');
                const files = e.dataTransfer.files;
                if (files.length > 0) {
                    this.processFile(files[0]);
                }
            }
            
            handleFileSelect(e) {
                const file = e.target.files[0];
                if (file) {
                    this.processFile(file);
                }
            }
            
            processFile(file) {
                // Validate file type
                const allowedTypes = ['.pdf', '.docx', '.doc'];
                const fileExtension = '.' + file.name.split('.').pop().toLowerCase();
                
                if (!allowedTypes.includes(fileExtension)) {
                    alert('Nur PDF und DOCX Dateien sind erlaubt.');
                    return;
                }
                
                // Show uploaded file
                this.elements.fileName.textContent = file.name;
                this.elements.uploadedFile.classList.remove('hidden');
                this.elements.uploadArea.classList.add('hidden');
                
                // Store file for processing
                this.uploadedFile = file;
            }
            
            removeFile() {
                this.elements.uploadedFile.classList.add('hidden');
                this.elements.uploadArea.classList.remove('hidden');
                this.elements.fileInput.value = '';
                this.uploadedFile = null;
            }
            
            handleTemplateChange() {
                const selectedTemplate = this.elements.templateSelect.value;
                if (selectedTemplate) {
                    const prompts = this.getTemplatePrompts();
                    this.elements.promptInput.value = prompts[selectedTemplate] || '';
                }
            }
            
            getTemplatePrompts() {
                return {
                    mahnung: 'Erstelle eine professionelle Mahnung für einen säumigen Kunden. Bitte folgende Informationen einbeziehen:\n\n- Kundenname: [Name eingeben]\n- Rechnungsnummer: [Nummer eingeben]\n- Rechnungsbetrag: [Betrag eingeben]\n- Ursprüngliches Zahlungsziel: [Datum eingeben]\n- Mahngebühren: [falls zutreffend]\n\nDie Mahnung soll höflich aber bestimmt formuliert sein und alle rechtlichen Anforderungen erfüllen.',
                    nda: 'Erstelle eine Geheimhaltungsvereinbarung (NDA) zwischen:\n\n- Partei 1: [Firmenname/Person]\n- Partei 2: [Firmenname/Person]\n- Zweck: [Grund für Geheimhaltung]\n- Dauer: [Zeitraum]\n\nDie Vereinbarung soll alle wesentlichen Punkte abdecken und nach deutschem Recht gültig sein.',
                    beratungsvertrag: 'Erstelle einen Beratungsvertrag zwischen unserer Kanzlei und einem Mandanten:\n\n- Mandant: [Name/Firma]\n- Beratungsbereich: [Rechtsgebiet]\n- Honorar: [Stundensatz/Pauschale]\n- Laufzeit: [Zeitraum]\n\nDer Vertrag soll die BRAO-Bestimmungen beachten.',
                    kaufvertrag: 'Erstelle einen Kaufvertrag für:\n\n- Verkäufer: [Name]\n- Käufer: [Name]\n- Kaufgegenstand: [Beschreibung]\n- Kaufpreis: [Betrag]\n- Übergabetermin: [Datum]\n\nAlle wesentlichen Gewährleistungsrechte einbeziehen.',
                    mietvertrag: 'Erstelle einen Mietvertrag für:\n\n- Vermieter: [Name]\n- Mieter: [Name]\n- Mietobjekt: [Adresse und Beschreibung]\n- Miete: [Betrag kalt/warm]\n- Mietbeginn: [Datum]\n\nAlle mietrechtlichen Bestimmungen beachten.',
                    arbeitsvertrag: 'Erstelle einen Arbeitsvertrag für:\n\n- Arbeitgeber: [Firmenname]\n- Arbeitnehmer: [Name]\n- Position: [Stellenbezeichnung]\n- Gehalt: [Betrag]\n- Arbeitszeit: [Stunden/Woche]\n- Beginn: [Datum]\n\nArbeitsrechtliche Bestimmungen einhalten.',
                    vollmacht: 'Erstelle eine Vollmacht:\n\n- Vollmachtgeber: [Name]\n- Bevollmächtigter: [Name]\n- Umfang: [Beschreibung der Befugnisse]\n- Gültigkeitsdauer: [Zeitraum]\n\nRechtssichere Formulierung verwenden.',
                    widerspruch: 'Erstelle einen Widerspruch gegen:\n\n- Behörde: [Name der Behörde]\n- Bescheid vom: [Datum]\n- Aktenzeichen: [falls bekannt]\n- Grund des Widerspruchs: [Begründung]\n\nFrist und Formvorschriften beachten.'
                };
            }
            
            updateTemplatePrompts() {
                // This method can be called to refresh template prompts
                console.log('Template prompts updated');
            }
            
            async generateDocument() {
                const prompt = this.elements.promptInput.value.trim();
                const template = this.elements.templateSelect.value;
                const formalTone = this.elements.formalTone.checked;
                const includeLegalRefs = this.elements.includeLegalRefs.checked;
                
                if (!prompt) {
                    alert('Bitte geben Sie eine Beschreibung für das Dokument ein.');
                    return;
                }
                
                // Show loading state
                this.showLoadingState();
                
                try {
                    // Call API
                    const result = await AnwaltsAI_API.generateDocument(prompt, template, this.uploadedFile, {
                        formalTone,
                        includeLegalRefs
                    });
                    
                    if (result.success) {
                        this.showGeneratedDocument(result.document, result.id);
                        this.addToRecentGenerations({
                            id: result.id,
                            prompt: prompt.substring(0, 100) + (prompt.length > 100 ? '...' : ''),
                            template: template,
                            timestamp: new Date().toISOString(),
                            preview: result.document.substring(0, 200) + '...'
                        });
                    } else {
                        throw new Error(result.error || 'Generierung fehlgeschlagen');
                    }
                } catch (error) {
                    console.error('Generation error:', error);
                    alert('Fehler bei der Dokumentgenerierung: ' + error.message);
                    this.showEmptyState();
                }
            }
            
            showLoadingState() {
                this.elements.emptyState.classList.add('hidden');
                this.elements.outputText.classList.add('hidden');
                this.elements.feedbackSection.classList.add('hidden');
                this.elements.loadingState.classList.remove('hidden');
                this.elements.generateBtn.disabled = true;
                this.elements.generateText.textContent = 'Generiert...';
            }
            
            showGeneratedDocument(document, id) {
                this.currentDocument = { content: document, id: id };
                
                this.elements.loadingState.classList.add('hidden');
                this.elements.emptyState.classList.add('hidden');
                this.elements.outputText.classList.remove('hidden');
                this.elements.feedbackSection.classList.remove('hidden');
                
                this.elements.outputText.value = document;
                this.elements.generateBtn.disabled = false;
                this.elements.generateText.textContent = 'Dokument generieren';
            }
            
            showEmptyState() {
                this.elements.loadingState.classList.add('hidden');
                this.elements.outputText.classList.add('hidden');
                this.elements.feedbackSection.classList.add('hidden');
                this.elements.emptyState.classList.remove('hidden');
                this.elements.generateBtn.disabled = false;
                this.elements.generateText.textContent = 'Dokument generieren';
            }
            
            async submitFeedback(type) {
                if (!this.currentDocument) return;
                
                let feedback = '';
                if (type === 'reject') {
                    feedback = prompt('Warum war das Ergebnis nicht hilfreich? (Optional)') || '';
                }
                
                try {
                    await AnwaltsAI_API.submitFeedback(type, this.currentDocument.id, feedback);
                    
                    // Update UI based on feedback type
                    switch (type) {
                        case 'accept':
                            this.elements.acceptBtn.innerHTML = '<i data-lucide="check" class="w-4 h-4"></i> Akzeptiert!';
                            this.elements.acceptBtn.classList.add('bg-green-700');
                            break;
                        case 'improve':
                            this.regenerateDocument();
                            break;
                        case 'reject':
                            this.showEmptyState();
                            break;
                    }
                } catch (error) {
                    console.error('Feedback error:', error);
                    alert('Fehler beim Senden des Feedbacks');
                }
            }
            
            async regenerateDocument() {
                const editedContent = this.elements.outputText.value;
                const originalPrompt = this.elements.promptInput.value;
                
                this.showLoadingState();
                
                try {
                    const result = await AnwaltsAI_API.improveDocument(
                        originalPrompt,
                        this.currentDocument.content,
                        editedContent
                    );
                    
                    if (result.success) {
                        this.showGeneratedDocument(result.document, result.id);
                    }
                } catch (error) {
                    console.error('Regeneration error:', error);
                    alert('Fehler bei der Verbesserung');
                    this.showGeneratedDocument(this.currentDocument.content, this.currentDocument.id);
                }
            }
            
            copyToClipboard() {
                if (this.currentDocument) {
                    navigator.clipboard.writeText(this.elements.outputText.value).then(() => {
                        // Show temporary feedback
                        const originalText = this.elements.copyOutput.innerHTML;
                        this.elements.copyOutput.innerHTML = '<i data-lucide="check" class="w-4 h-4"></i>';
                        setTimeout(() => {
                            this.elements.copyOutput.innerHTML = originalText;
                            lucide.createIcons();
                        }, 2000);
                    });
                }
            }
            
            downloadDocument() {
                if (this.currentDocument) {
                    const blob = new Blob([this.elements.outputText.value], { type: 'text/plain' });
                    const url = URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = `anwalts-ai-dokument-${Date.now()}.txt`;
                    document.body.appendChild(a);
                    a.click();
                    document.body.removeChild(a);
                    URL.revokeObjectURL(url);
                }
            }
            
            clearAll() {
                this.elements.templateSelect.value = '';
                this.elements.promptInput.value = '';
                this.elements.formalTone.checked = false;
                this.elements.includeLegalRefs.checked = false;
                this.removeFile();
                this.showEmptyState();
                this.currentDocument = null;
            }
            
            saveAsTemplate() {
                if (!this.currentDocument) {
                    alert('Kein Dokument zum Speichern vorhanden');
                    return;
                }
                
                const templateName = prompt('Name für die neue Vorlage:');
                if (templateName) {
                    // Save template logic would go here
                    console.log('Saving template:', templateName);
                    alert('Vorlage gespeichert: ' + templateName);
                }
            }
            
            addToRecentGenerations(generation) {
                this.recentGenerations.unshift(generation);
                this.recentGenerations = this.recentGenerations.slice(0, 10); // Keep only last 10
                localStorage.setItem('anwalts_recent_generations', JSON.stringify(this.recentGenerations));
                this.loadRecentGenerations();
            }
            
            loadRecentGenerations() {
                const container = this.elements.recentGenerations;
                
                if (this.recentGenerations.length === 0) {
                    container.innerHTML = `
                        <div class="text-center py-8 text-gray-400">
                            <i data-lucide="clock" class="w-8 h-8 mx-auto mb-2"></i>
                            <p>Noch keine Dokumente generiert</p>
                        </div>
                    `;
                } else {
                    container.innerHTML = this.recentGenerations.map(gen => `
                        <div class="bg-white/5 rounded-lg p-4 hover:bg-white/10 transition-colors cursor-pointer" data-generation-id="${gen.id}">
                            <div class="flex items-start justify-between">
                                <div class="flex-1">
                                    <p class="font-medium text-sm mb-1">${gen.prompt}</p>
                                    <p class="text-xs text-gray-400 mb-2">${gen.template ? `Vorlage: ${gen.template}` : 'Freie Erstellung'}</p>
                                    <p class="text-xs text-gray-500">${new Date(gen.timestamp).toLocaleString('de-DE')}</p>
                                </div>
                                <button class="text-gray-400 hover:text-white ml-3" onclick="event.stopPropagation(); documentGenerator.loadGeneration('${gen.id}')">
                                    <i data-lucide="external-link" class="w-4 h-4"></i>
                                </button>
                            </div>
                        </div>
                    `).join('');
                }
                
                lucide.createIcons();
            }
            
            loadGeneration(id) {
                const generation = this.recentGenerations.find(g => g.id === id);
                if (generation) {
                    // Load the generation data back into the form
                    console.log('Loading generation:', generation);
                    alert('Generation wird geladen...');
                }
            }
        }

        // API Placeholder Functions
        const AnwaltsAI_API = {
            // Document Generation API
            async generateDocument(prompt, template, uploadedFile, options = {}) {
                console.log('API Call: Generate Document', { prompt, template, uploadedFile, options });
                return new Promise(resolve => {
                    setTimeout(() => {
                        // Simulate different document types based on template
                        let documentContent = '';
                        
                        switch(template) {
                            case 'mahnung':
                                documentContent = `MAHNUNG

Sehr geehrte Damen und Herren,

hiermit mahnen wir Sie zur Zahlung der noch offenen Rechnung an.

Rechnungsdetails:
- Rechnungsnummer: [Aus Prompt extrahieren]
- Rechnungsdatum: [Datum]
- Fälligkeit: [Datum]
- Betrag: [Betrag] EUR

Trotz Ablauf der Zahlungsfrist ist der Betrag noch nicht bei uns eingegangen.

Wir fordern Sie hiermit auf, den ausstehenden Betrag binnen 14 Tagen nach Erhalt dieses Schreibens zu begleichen.

Sollten Sie bereits gezahlt haben, betrachten Sie dieses Schreiben als gegenstandslos.

Mit freundlichen Grüßen
[Kanzleiname]`;
                                break;
                            case 'nda':
                                documentContent = `GEHEIMHALTUNGSVEREINBARUNG

zwischen

[Partei 1]
und
[Partei 2]

§ 1 Gegenstand der Vereinbarung
Die Parteien beabsichtigen, vertrauliche Informationen auszutauschen...

§ 2 Vertraulichkeitsverpflichtung
Die empfangende Partei verpflichtet sich...

§ 3 Ausnahmen
Von der Geheimhaltungspflicht ausgenommen sind...

§ 4 Dauer der Verpflichtung
Diese Vereinbarung gilt für einen Zeitraum von...

§ 5 Vertragsstrafe
Bei Verletzung der Geheimhaltungspflicht...

§ 6 Schlussbestimmungen
Es gilt deutsches Recht...`;
                                break;
                            default:
                                documentContent = `Generiertes Rechtsdokument

Basierend auf Ihrer Anfrage: "${prompt.substring(0, 100)}..."

[Hier würde der KI-generierte Inhalt stehen, der auf Ihren spezifischen Anforderungen basiert.]

Rechtliche Hinweise:
- Dieses Dokument wurde mit KI-Unterstützung erstellt
- Bitte prüfen Sie alle Angaben auf Richtigkeit
- Bei wichtigen Rechtsfragen konsultieren Sie einen Anwalt

${options.includeLegalRefs ? '\nRelevante Gesetzesverweise:\n- BGB §§ 433 ff.\n- ZPO §§ 253 ff.' : ''}

${options.formalTone ? '\nMit vorzüglicher Hochachtung' : '\nMit freundlichen Grüßen'}

[Kanzleiname]
[Datum]`;
                        }
                        
                        resolve({
                            success: true,
                            document: documentContent,
                            id: 'doc_' + Date.now()
                        });
                    }, 2000);
                });
            },
            
            // Document Improvement API
            async improveDocument(originalPrompt, originalDocument, editedDocument) {
                console.log('API Call: Improve Document', { originalPrompt, originalDocument, editedDocument });
                return new Promise(resolve => {
                    setTimeout(() => {
                        resolve({
                            success: true,
                            document: editedDocument + '\n\n[KI-Verbesserung: Dokument wurde basierend auf Ihren Änderungen optimiert]',
                            id: 'doc_improved_' + Date.now()
                        });
                    }, 1500);
                });
            },
            
            // Email Management API
            async getEmails() {
                console.log('API Call: Get Emails');
                return new Promise(resolve => {
                    setTimeout(() => {
                        const currentDate = new Date();
                        const yesterday = new Date(currentDate.getTime() - 24 * 60 * 60 * 1000);
                        const weekAgo = new Date(currentDate.getTime() - 7 * 24 * 60 * 60 * 1000);
                        
                        resolve({
                            success: true,
                            emails: [
                                {
                                    id: 1,
                                    sender: 'max.mustermann@example.com',
                                    subject: 'Rückfrage zu Vertragsentwurf',
                                    date: currentDate.toISOString(),
                                    hasAttachment: true,
                                    hasAIResponse: false,
                                    read: false,
                                    responded: false,
                                    content: `Sehr geehrte Damen und Herren,

vielen Dank für den Vertragsentwurf. Ich habe noch einige Rückfragen zu den Klauseln 5 und 7.

Könnten Sie mir bitte erläutern, was genau mit "angemessener Frist" gemeint ist? Gibt es hier rechtliche Richtwerte?

Für eine zeitnahe Rückmeldung wäre ich sehr dankbar.

Mit freundlichen Grüßen
Max Mustermann`
                                },
                                {
                                    id: 2,
                                    sender: 'dr.mueller@partnerkanzlei.de',
                                    subject: 'Gemeinsamer Mandant - Abstimmung erforderlich',
                                    date: yesterday.toISOString(),
                                    hasAttachment: false,
                                    hasAIResponse: true,
                                    read: true,
                                    responded: true,
                                    content: `Liebe Kollegin Dr. Vogel,

bezüglich unseres gemeinsamen Mandanten Firma ABC GmbH benötigen wir eine Abstimmung zur weiteren Vorgehensweise.

Die neuen Entwicklungen erfordern eine Anpassung unserer Strategie. Wann hätten Sie Zeit für ein kurzes Telefonat?

Beste Grüße
Dr. Hans Müller`
                                },
                                {
                                    id: 3,
                                    sender: 'verwaltung@amtsgericht-berlin.de',
                                    subject: 'Terminbestätigung Verhandlung Az: 123 C 456/24',
                                    date: yesterday.toISOString(),
                                    hasAttachment: true,
                                    hasAIResponse: false,
                                    read: false,
                                    responded: false,
                                    content: `Sehr geehrte Rechtsanwältin Dr. Vogel,

hiermit bestätigen wir den Verhandlungstermin für:

Datum: 15. Februar 2024
Uhrzeit: 10:00 Uhr
Saal: A123
Aktenzeichen: 123 C 456/24

Bitte bringen Sie alle relevanten Unterlagen mit.

Mit freundlichen Grüßen
Geschäftsstelle Amtsgericht Berlin`
                                },
                                {
                                    id: 4,
                                    sender: 'buchhaltung@firma-xyz.de',
                                    subject: 'Zahlungsverzug - Mahnung erhalten',
                                    date: weekAgo.toISOString(),
                                    hasAttachment: false,
                                    hasAIResponse: false,
                                    read: true,
                                    responded: false,
                                    content: `Sehr geehrte Frau Dr. Vogel,

wir haben heute Ihre Mahnung erhalten. Leider ist uns aufgrund eines internen Fehlers die ursprüngliche Rechnung nicht zugegangen.

Wir werden den Betrag umgehend überweisen. Können Sie uns eine Kopie der Originalrechnung zukommen lassen?

Mit freundlichen Grüßen
Maria Schmidt
Buchhaltung Firma XYZ`
                                },
                                {
                                    id: 5,
                                    sender: 'info@rechtsschutz-versicherung.de',
                                    subject: 'Deckungszusage für Mandant Schmidt',
                                    date: weekAgo.toISOString(),
                                    hasAttachment: true,
                                    hasAIResponse: true,
                                    read: true,
                                    responded: true,
                                    content: `Sehr geehrte Frau Dr. Vogel,

für Ihren Mandanten Herrn Schmidt erteilen wir hiermit die Deckungszusage für das arbeitsrechtliche Verfahren.

Die Kostenübernahme erfolgt nach den vereinbarten Bedingungen. Die entsprechenden Unterlagen finden Sie im Anhang.

Mit freundlichen Grüßen
Rechtsschutzversicherung AG`
                                }
                            ]
                        });
                    }, 1000);
                });
            },
            
            // Mark Email as Read API
            async markEmailAsRead(emailId) {
                console.log('API Call: Mark Email as Read', { emailId });
                return new Promise(resolve => {
                    setTimeout(() => {
                        resolve({ success: true });
                    }, 200);
                });
            },
            
            // Generate Email Response API
            async generateEmailResponse(email, responseType = 'professional') {
                console.log('API Call: Generate Email Response', { email: email.id, responseType });
                return new Promise(resolve => {
                    setTimeout(() => {
                        let response = '';
                        
                        switch (responseType) {
                            case 'professional':
                                response = `Sehr geehrte Damen und Herren,

vielen Dank für Ihre E-Mail vom ${new Date(email.date).toLocaleDateString('de-DE')}.

[Hier würde die KI eine professionelle Antwort basierend auf dem Inhalt generieren]

Für weitere Fragen stehe ich Ihnen gerne zur Verfügung.

Mit freundlichen Grüßen

Dr. Anna Vogel
Rechtsanwältin`;
                                break;
                                
                            case 'friendly':
                                response = `Liebe/r ${email.sender.split('@')[0]},

herzlichen Dank für Ihre Nachricht!

[Hier würde die KI eine freundliche Antwort generieren]

Ich melde mich zeitnah bei Ihnen zurück.

Beste Grüße
Anna Vogel`;
                                break;
                                
                            case 'formal':
                                response = `Sehr geehrte Damen und Herren,

Bezug: Ihr Schreiben vom ${new Date(email.date).toLocaleDateString('de-DE')}
Betreff: ${email.subject}

[Hier würde die KI eine formelle rechtliche Antwort generieren]

Hochachtungsvoll

Dr. Anna Vogel
Rechtsanwältin
Fachanwältin für [Rechtsgebiet]`;
                                break;
                        }
                        
                        resolve({
                            success: true,
                            response: response
                        });
                    }, 2000);
                });
            },
            
            // Template Management API
            async getTemplates() {
                console.log('API Call: Get Templates');
                return new Promise(resolve => {
                    setTimeout(() => {
                        resolve({
                            success: true,
                            templates: [
                                // System Templates
                                {
                                    id: 'sys_mahnung',
                                    name: 'Mahnung / Zahlungserinnerung',
                                    type: 'system',
                                    category: 'payment',
                                    description: 'Standardvorlage für Mahnungen und Zahlungserinnerungen',
                                    createdAt: '2024-01-01T00:00:00Z',
                                    usageCount: 45
                                },
                                {
                                    id: 'sys_nda',
                                    name: 'Geheimhaltungsvereinbarung (NDA)',
                                    type: 'system',
                                    category: 'contracts',
                                    description: 'Standardvorlage für Geheimhaltungsvereinbarungen',
                                    createdAt: '2024-01-01T00:00:00Z',
                                    usageCount: 32
                                },
                                {
                                    id: 'sys_beratung',
                                    name: 'Beratungsvertrag',
                                    type: 'system',
                                    category: 'contracts',
                                    description: 'Standardvorlage für Beratungsverträge',
                                    createdAt: '2024-01-01T00:00:00Z',
                                    usageCount: 28
                                },
                                {
                                    id: 'sys_widerspruch',
                                    name: 'Widerspruch',
                                    type: 'system',
                                    category: 'legal',
                                    description: 'Standardvorlage für Widersprüche gegen Bescheide',
                                    createdAt: '2024-01-01T00:00:00Z',
                                    usageCount: 18
                                },
                                {
                                    id: 'sys_vollmacht',
                                    name: 'Vollmacht',
                                    type: 'system',
                                    category: 'legal',
                                    description: 'Standardvorlage für Vollmachten',
                                    createdAt: '2024-01-01T00:00:00Z',
                                    usageCount: 22
                                },
                                
                                // Personal Templates
                                {
                                    id: 'pers_arbeitsrecht',
                                    name: 'Arbeitsrechtliche Erstberatung',
                                    type: 'personal',
                                    category: 'letters',
                                    description: 'Persönliche Vorlage für arbeitsrechtliche Erstberatungen',
                                    createdAt: '2024-01-15T10:30:00Z',
                                    usageCount: 12
                                },
                                {
                                    id: 'pers_mietrecht',
                                    name: 'Mietrechtliche Abmahnung',
                                    type: 'personal',
                                    category: 'legal',
                                    description: 'Persönliche Vorlage für mietrechtliche Abmahnungen',
                                    createdAt: '2024-01-20T14:15:00Z',
                                    usageCount: 8
                                },
                                {
                                    id: 'pers_familien',
                                    name: 'Familienrechtlicher Brief',
                                    type: 'personal',
                                    category: 'letters',
                                    description: 'Persönliche Vorlage für familienrechtliche Korrespondenz',
                                    createdAt: '2024-02-01T09:00:00Z',
                                    usageCount: 5
                                },
                                
                                // Firm Templates
                                {
                                    id: 'firm_mandatsvertrag',
                                    name: 'Mandatsvertrag Standard',
                                    type: 'firm',
                                    category: 'contracts',
                                    description: 'Firmeneigene Vorlage für Mandatsverträge',
                                    createdAt: '2024-01-05T16:45:00Z',
                                    usageCount: 67
                                },
                                {
                                    id: 'firm_honorar',
                                    name: 'Honorarvereinbarung',
                                    type: 'firm',
                                    category: 'contracts',
                                    description: 'Firmeneigene Vorlage für Honorarvereinbarungen',
                                    createdAt: '2024-01-08T11:20:00Z',
                                    usageCount: 34
                                },
                                {
                                    id: 'firm_kanzlei_brief',
                                    name: 'Kanzlei-Briefkopf Standard',
                                    type: 'firm',
                                    category: 'letters',
                                    description: 'Firmeneigene Vorlage für offizielle Kanzleischreiben',
                                    createdAt: '2024-01-10T08:30:00Z',
                                    usageCount: 89
                                }
                            ]
                        });
                    }, 800);
                });
            },
            
            // User Feedback API
            async submitFeedback(type, documentId, feedback) {
                console.log('API Call: Submit Feedback', { type, documentId, feedback });
                return new Promise(resolve => {
                    setTimeout(() => {
                        resolve({ success: true, message: 'Feedback submitted successfully' });
                    }, 500);
                });
            }
        };

        // Document Generator with Real API Integration
        class DocumentGenerator {
            constructor() {
                this.apiUrl = 'http://localhost:5001/api/generate';
                this.feedbackApiUrl = 'http://localhost:5001/api/feedback';
                
                // Debug: Check if button exists
                console.log('Generate button found:', document.getElementById('generate-btn'));
                
                // Force enable button if disabled
                const genBtn = document.getElementById('generate-btn');
                if (genBtn) {
                    genBtn.disabled = false;
                    genBtn.style.pointerEvents = 'auto';
                    console.log('Button enabled');
                }
                this.currentDocumentId = null;
                this.currentModelResponse = null;
                
                this.initializeElements();
                this.setupEventListeners();
            }

            initializeElements() {
                // Form elements
                this.fileInput = document.getElementById('file-input');
                this.uploadArea = document.getElementById('upload-area');
                this.uploadedFile = document.getElementById('uploaded-file');
                this.fileName = document.getElementById('file-name');
                this.removeFileBtn = document.getElementById('remove-file');
                this.promptInput = document.getElementById('prompt-input');
                this.generateBtn = document.getElementById('generate-btn');
                this.generateText = document.getElementById('generate-text');
                
                // Output elements
                this.loadingState = document.getElementById('loading-state');
                this.emptyState = document.getElementById('empty-state');
                this.outputText = document.getElementById('output-text');
                this.feedbackSection = document.getElementById('feedback-section');
                
                // Buttons
                this.copyBtn = document.getElementById('copy-output');
                this.downloadBtn = document.getElementById('download-output');
                this.acceptBtn = document.getElementById('accept-btn');
                this.improveBtn = document.getElementById('improve-btn');
                this.rejectBtn = document.getElementById('reject-btn');
            }

            setupEventListeners() {
                // File upload handling
                if (this.uploadArea && this.fileInput) {
                    this.uploadArea.addEventListener('click', () => this.fileInput.click());
                    this.uploadArea.addEventListener('dragover', (e) => {
                        e.preventDefault();
                        this.uploadArea.classList.add('dragover');
                    });
                    this.uploadArea.addEventListener('dragleave', () => {
                        this.uploadArea.classList.remove('dragover');
                    });
                    this.uploadArea.addEventListener('drop', (e) => {
                        e.preventDefault();
                        this.uploadArea.classList.remove('dragover');
                        const files = e.dataTransfer.files;
                        if (files.length > 0) {
                            this.handleFileSelect(files[0]);
                        }
                    });
                    
                    this.fileInput.addEventListener('change', (e) => {
                        if (e.target.files.length > 0) {
                            this.handleFileSelect(e.target.files[0]);
                        }
                    });
                }

                // Remove file button
                if (this.removeFileBtn) {
                    this.removeFileBtn.addEventListener('click', () => this.removeFile());
                }

                // Generate button
                if (this.generateBtn) {
                    this.generateBtn.addEventListener('click', () => this.generateDocument());
                }

                // Copy button
                if (this.copyBtn) {
                    this.copyBtn.addEventListener('click', () => this.copyToClipboard());
                }

                // Download button
                if (this.downloadBtn) {
                    this.downloadBtn.addEventListener('click', () => this.downloadDocument());
                }

                // Feedback buttons
                if (this.acceptBtn) {
                    this.acceptBtn.addEventListener('click', () => this.submitFeedback('accept'));
                }
                if (this.improveBtn) {
                    this.improveBtn.addEventListener('click', () => this.submitFeedback('improve'));
                }
                if (this.rejectBtn) {
                    this.rejectBtn.addEventListener('click', () => this.submitFeedback('reject'));
                }
            }

            handleFileSelect(file) {
                // Validate file type
                const allowedTypes = ['application/pdf', 'image/png', 'image/jpeg', 'image/jpg', 'text/plain'];
                if (!allowedTypes.includes(file.type)) {
                    this.showStatus('Bitte wählen Sie eine gültige PDF, PNG, JPG oder TXT Datei.', 'error');
                    return;
                }

                // Validate file size (max 10MB)
                if (file.size > 10 * 1024 * 1024) {
                    this.showStatus('Dateigröße muss unter 10MB liegen.', 'error');
                    return;
                }

                // Show file info
                if (this.fileName) this.fileName.textContent = file.name;
                if (this.uploadedFile) this.uploadedFile.classList.remove('hidden');
                if (this.uploadArea) this.uploadArea.style.display = 'none';
                
                this.selectedFile = file;
            }

            removeFile() {
                this.selectedFile = null;
                if (this.uploadedFile) this.uploadedFile.classList.add('hidden');
                if (this.uploadArea) this.uploadArea.style.display = 'block';
                if (this.fileInput) this.fileInput.value = '';
            }

            async generateDocument() {
                const promptText = this.promptInput?.value?.trim();
                
                if (!promptText && !this.selectedFile) {
                    this.showStatus('Bitte geben Sie eine Beschreibung ein oder laden Sie ein Dokument hoch.', 'error');
                    return;
                }

                this.setLoadingState(true);

                try {
                    let extractedText = promptText || '';
                    let documentType = 'general';

                    // Extract text from file if uploaded
                    if (this.selectedFile) {
                        extractedText = await this.extractTextFromFile(this.selectedFile);
                        documentType = this.detectDocumentType(extractedText);
                    }

                    // Call the API
                    const response = await fetch(this.apiUrl, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({
                            prompt: extractedText,
                            document_type: documentType,
                            user_id: 'dashboard_user_' + Date.now()
                        }),
                    });

                    if (!response.ok) {
                        throw new Error(`API Fehler: ${response.status}`);
                    }
                    
                    const result = await response.json();
                    
                    if (!result.success) {
                        throw new Error(result.error || 'API returned unsuccessful response');
                    }

                    this.currentDocumentId = result.document_id;
                    this.currentModelResponse = result;
                    
                    this.showResults(result.response);

                } catch (error) {
                    console.error('Generation Error:', error);
                    this.showStatus(`❌ Fehler: ${error.message}`, 'error');
                } finally {
                    this.setLoadingState(false);
                }
            }

            async extractTextFromFile(file) {
                return new Promise((resolve, reject) => {
                    const reader = new FileReader();
                    
                    if (file.type === 'text/plain') {
                        reader.onload = (e) => resolve(e.target.result);
                        reader.readAsText(file);
                    } else if (file.type === 'application/pdf') {
                        resolve(`[PDF FILE: ${file.name}] - Content will be extracted server-side`);
                    } else {
                        resolve(`[IMAGE FILE: ${file.name}] - OCR processing will be performed server-side`);
                    }
                });
            }

            detectDocumentType(text) {
                const textLower = text.toLowerCase();
                
                if (textLower.includes('mahnung') || textLower.includes('zahlungserinnerung')) {
                    return 'mahnung';
                } else if (textLower.includes('klage') || textLower.includes('klageschrift')) {
                    return 'klage';
                } else if (textLower.includes('kündigung')) {
                    return 'kuendigung';
                } else if (textLower.includes('vertrag') || textLower.includes('vereinbarung')) {
                    return 'contract';
                } else if (textLower.includes('nda') || textLower.includes('geheimhaltung')) {
                    return 'nda';
                } else {
                    return 'general';
                }
            }

            showResults(responseText) {
                // Hide empty state and loading
                if (this.emptyState) this.emptyState.style.display = 'none';
                if (this.loadingState) this.loadingState.classList.add('hidden');
                
                // Show and populate output
                if (this.outputText) {
                    this.outputText.classList.remove('hidden');
                    this.outputText.value = responseText;
                }
                
                // Show feedback section
                if (this.feedbackSection) this.feedbackSection.classList.remove('hidden');
                
                this.showStatus('✅ Dokument erfolgreich generiert!', 'success');
            }

            setLoadingState(loading) {
                if (loading) {
                    if (this.emptyState) this.emptyState.style.display = 'none';
                    if (this.outputText) this.outputText.classList.add('hidden');
                    if (this.loadingState) this.loadingState.classList.remove('hidden');
                    if (this.generateBtn) {
                        this.generateBtn.disabled = true;
                        if (this.generateText) this.generateText.textContent = 'Generiert...';
                    }
                } else {
                    if (this.loadingState) this.loadingState.classList.add('hidden');
                    if (this.generateBtn) {
                        this.generateBtn.disabled = false;
                        if (this.generateText) this.generateText.textContent = 'Dokument generieren';
                    }
                }
            }

            async copyToClipboard() {
                if (this.outputText && this.outputText.value) {
                    try {
                        await navigator.clipboard.writeText(this.outputText.value);
                        this.showStatus('✅ Text in Zwischenablage kopiert', 'success');
                    } catch (err) {
                        this.showStatus('❌ Fehler beim Kopieren', 'error');
                    }
                }
            }

            downloadDocument() {
                if (this.outputText && this.outputText.value) {
                    const blob = new Blob([this.outputText.value], { type: 'text/plain' });
                    const url = URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = 'legal-document.txt';
                    document.body.appendChild(a);
                    a.click();
                    document.body.removeChild(a);
                    URL.revokeObjectURL(url);
                    this.showStatus('✅ Dokument heruntergeladen', 'success');
                }
            }

            async submitFeedback(feedbackType) {
                if (!this.currentDocumentId) {
                    this.showStatus('❌ Keine Dokument-ID für Feedback verfügbar', 'error');
                    return;
                }
                
                try {
                    const response = await fetch(this.feedbackApiUrl, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({
                            document_id: this.currentDocumentId,
                            feedback_type: feedbackType,
                            user_id: 'dashboard_user_' + Date.now()
                        }),
                    });
                    
                    const result = await response.json();
                    
                    if (result.success) {
                        this.showStatus(`✅ Feedback "${feedbackType}" erfolgreich übermittelt!`, 'success');
                        this.disableFeedbackButtons();
                    } else {
                        throw new Error(result.error || 'Feedback submission failed');
                    }
                    
                } catch (error) {
                    console.error('Feedback error:', error);
                    this.showStatus(`❌ Feedback-Fehler: ${error.message}`, 'error');
                }
            }

            disableFeedbackButtons() {
                [this.acceptBtn, this.improveBtn, this.rejectBtn].forEach(btn => {
                    if (btn) {
                        btn.disabled = true;
                        btn.style.opacity = '0.5';
                        btn.style.cursor = 'not-allowed';
                    }
                });
            }

            showStatus(message, type) {
                console.log(`${type.toUpperCase()}: ${message}`);
                // Create a simple toast notification
                const toast = document.createElement('div');
                toast.className = `status status-${type}`;
                toast.textContent = message;
                toast.style.cssText = `
                    position: fixed;
                    top: 20px;
                    right: 20px;
                    padding: 1rem;
                    border-radius: 0.5rem;
                    color: white;
                    font-weight: 500;
                    z-index: 1000;
                    max-width: 300px;
                `;
                
                if (type === 'success') {
                    toast.style.background = 'rgba(34, 197, 94, 0.9)';
                } else if (type === 'error') {
                    toast.style.background = 'rgba(239, 68, 68, 0.9)';
                } else {
                    toast.style.background = 'rgba(59, 130, 246, 0.9)';
                }
                
                document.body.appendChild(toast);
                
                setTimeout(() => {
                    if (document.body.contains(toast)) {
                        document.body.removeChild(toast);
                    }
                }, 3000);
            }
        }
    </script>
    

    </div>
    
    <script>
        // Navigation between sections
        function showPage(pageId) {
            // Hide all sections
            document.querySelectorAll('.page-section').forEach(section => {
                section.classList.remove('active');
            });
            
            // Show selected section
            document.getElementById(pageId).classList.add('active');
        }
        
        // Add navigation buttons to landing page
        document.addEventListener('DOMContentLoaded', function() {
            // Add dashboard navigation to landing page
            const landingNav = document.querySelector('#landing-page nav .navbar-content');
            if (landingNav) {
                const dashboardBtn = document.createElement('button');
                dashboardBtn.innerHTML = '<i data-lucide="layout-dashboard"></i> Dashboard';
                dashboardBtn.className = 'nav-toggle px-4 py-2 bg-white/10 hover:bg-white/20 rounded-lg flex items-center gap-2';
                dashboardBtn.onclick = () => showPage('dashboard-page');
                landingNav.appendChild(dashboardBtn);
            }
            
            // Add back to landing navigation to dashboard
            const dashboardNav = document.querySelector('#dashboard-page nav');
            if (dashboardNav) {
                const backBtn = document.createElement('button');
                backBtn.innerHTML = '<i data-lucide="arrow-left"></i> Zurück zur Startseite';
                backBtn.className = 'nav-toggle px-4 py-2 bg-white/10 hover:bg-white/20 rounded-lg flex items-center gap-2 mb-4';
                backBtn.onclick = () => showPage('landing-page');
                dashboardNav.prepend(backBtn);
            }
            
            // Initialize Lucide icons
            if (typeof lucide !== 'undefined') {
                lucide.createIcons();
            }
        });
    </script>
</body>
</html>